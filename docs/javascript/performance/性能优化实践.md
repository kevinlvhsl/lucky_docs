[æ–‡ç« éƒ¨åˆ†è½¬è½½è‡ª:Vue é¡¹ç›®æ€§èƒ½ä¼˜åŒ– â€” å®è·µæŒ‡å—](https://juejin.im/post/5d548b83f265da03ab42471d)

## ä¸€ã€ä»£ç å±‚é¢æ€§èƒ½ä¼˜åŒ–

### 1.1ã€v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯

`v-if` æ˜¯ çœŸæ­£ çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºï¼›ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚

`v-show`Â  å°±ç®€å•å¾—å¤šï¼Œ ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS çš„ display å±æ€§è¿›è¡Œåˆ‡æ¢ã€‚

æ‰€ä»¥ï¼Œ**v-if é€‚ç”¨äºåœ¨è¿è¡Œæ—¶å¾ˆå°‘æ”¹å˜æ¡ä»¶ï¼Œä¸éœ€è¦é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ï¼›v-show åˆ™é€‚ç”¨äºéœ€è¦éå¸¸é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ã€‚**

### 1.2ã€ v-for éå†å¿…é¡»ä¸º item æ·»åŠ  keyï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-if

**ï¼ˆ1ï¼‰v-for éå†å¿…é¡»ä¸º item æ·»åŠ  key**

åœ¨åˆ—è¡¨æ•°æ®è¿›è¡Œéå†æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€é¡¹ item è®¾ç½®å”¯ä¸€ key å€¼ï¼Œæ–¹ä¾¿ Vue.js å†…éƒ¨æœºåˆ¶ç²¾å‡†æ‰¾åˆ°è¯¥æ¡åˆ—è¡¨æ•°æ®ã€‚å½“ state æ›´æ–°æ—¶ï¼Œæ–°çš„çŠ¶æ€å€¼å’Œæ—§çš„çŠ¶æ€å€¼å¯¹æ¯”ï¼Œè¾ƒå¿«åœ°å®šä½åˆ° diff ã€‚

**ï¼ˆ2ï¼‰v-for éå†é¿å…åŒæ—¶ä½¿ç”¨ v-if**

v-for æ¯” v-if ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œå°†ä¼šå½±å“é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å½“ä¹‹éœ€è¦æ¸²æŸ“å¾ˆå°ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼Œå¿…è¦æƒ…å†µä¸‹åº”è¯¥æ›¿æ¢æˆ computed å±æ€§ã€‚

**æ¨è**

```js
<ul>
  <li
    v-for="user in activeUsers"
    :key="user.id">
    {{ user.name }}
  </li>
</ul>
computed: {
  activeUsers: function () {
    return this.users.filter(function (user) {
	 return user.isActive
    })
  }
}


```

### 1.3ã€é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

Vue ä¼šé€šè¿‡ Object.defineProperty å¯¹æ•°æ®è¿›è¡ŒåŠ«æŒï¼Œæ¥å®ç°è§†å›¾å“åº”æ•°æ®çš„å˜åŒ–ï¼Œç„¶è€Œæœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯çº¯ç²¹çš„æ•°æ®å±•ç¤ºï¼Œä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ Vue æ¥åŠ«æŒæˆ‘ä»¬çš„æ•°æ®ï¼Œåœ¨å¤§é‡æ•°æ®å±•ç¤ºçš„æƒ…å†µä¸‹ï¼Œè¿™èƒ½å¤Ÿå¾ˆæ˜æ˜¾çš„å‡å°‘ç»„ä»¶åˆå§‹åŒ–çš„æ—¶é—´ï¼Œé‚£å¦‚ä½•ç¦æ­¢ Vue åŠ«æŒæˆ‘ä»¬çš„æ•°æ®å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ `Object.freeze`æˆ–è€…ä½¿ç”¨`Object.preventExtensions`æ–¹æ³•æ¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€æ—¦è¢«å†»ç»“çš„å¯¹è±¡å°±å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚

[Object.freeze å’Œ Object.preventExtensions ä»‹ç»](https://segmentfault.com/a/1190000003894119)

```js
export default {
  data: () => ({
    users: {}
  }),
  async created() {
    const users = await axios.get("/api/users");
    this.users = Object.freeze(users);
  }
};
```

### 1.4ã€ äº‹ä»¶çš„é”€æ¯

Vue ç»„ä»¶é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…ç†å®ƒä¸å…¶å®ƒå®ä¾‹çš„è¿æ¥ï¼Œè§£ç»‘å®ƒçš„å…¨éƒ¨æŒ‡ä»¤åŠäº‹ä»¶ç›‘å¬å™¨ï¼Œä½†æ˜¯ä»…é™äºç»„ä»¶æœ¬èº«çš„äº‹ä»¶ã€‚ å¦‚æœåœ¨ js å†…ä½¿ç”¨ addEventListener ç­‰æ–¹å¼æ˜¯ä¸ä¼šè‡ªåŠ¨é”€æ¯çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ—¶æ‰‹åŠ¨ç§»é™¤è¿™äº›äº‹ä»¶çš„ç›‘å¬ï¼Œä»¥å…é€ æˆå†…å­˜æ³„éœ²ï¼Œå¦‚ï¼š

```js
created() {
  addEventListener('click', this.click, false);
  //å®šæ—¶å™¨
  timer=setInternal(()=>{
      ....
  },1000)
},
beforeDestroy() {
  removeEventListener('click', this.click, false);
  clearInternal(timer);//è®°å¾—æ¸…ç†å®šæ—¶å™¨
}

```

### 1.5ã€ å›¾ç‰‡èµ„æºæ‡’åŠ è½½

å¯¹äºå›¾ç‰‡è¿‡å¤šçš„é¡µé¢ï¼Œä¸ºäº†åŠ é€Ÿé¡µé¢åŠ è½½é€Ÿåº¦ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å°†é¡µé¢å†…æœªå‡ºç°åœ¨å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡å…ˆä¸åšåŠ è½½ï¼Œ ç­‰åˆ°æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸåå†å»åŠ è½½ã€‚è¿™æ ·å¯¹äºé¡µé¢åŠ è½½æ€§èƒ½ä¸Šä¼šæœ‰å¾ˆå¤§çš„æå‡ï¼Œä¹Ÿæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Vue çš„ `vue-lazyload` æ’ä»¶ï¼š

[vue-lazyload åœ°å€](https://github.com/hilongjw/vue-lazyload)

```js
import Vue from "vue";
import App from "./App.vue";
import VueLazyload from "vue-lazyload";

Vue.use(VueLazyload);

// or with options
Vue.use(VueLazyload, {
  preLoad: 1.3,
  error: "dist/error.png",
  loading: "dist/loading.gif",
  attempt: 1
});

new Vue({
  el: "body",
  components: {
    App
  }
});
//ä½¿ç”¨
<ul>
  <li v-for="img in list">
    <img v-lazy="img.src" >
  </li>
</ul>
```

### 1.6ã€ è·¯ç”±æ‡’åŠ è½½

Vue æ˜¯å•é¡µé¢åº”ç”¨ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„è·¯ç”±å¼•å…¥ ï¼Œè¿™æ ·ä½¿ç”¨ webpcak æ‰“åŒ…åçš„æ–‡ä»¶å¾ˆå¤§ï¼Œå½“è¿›å…¥é¦–é¡µæ—¶ï¼ŒåŠ è½½çš„èµ„æºè¿‡å¤šï¼Œé¡µé¢ä¼šå‡ºç°ç™½å±çš„æƒ…å†µï¼Œä¸åˆ©äºç”¨æˆ·ä½“éªŒã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”çš„ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚è¿™æ ·ä¼šå¤§å¤§æé«˜é¦–å±æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œä½†æ˜¯å¯èƒ½å…¶ä»–çš„é¡µé¢çš„é€Ÿåº¦å°±ä¼šé™ä¸‹æ¥ã€‚

```js
const Foo = () => import("./Foo.vue");
const router = new VueRouter({
  routes: [{ path: "/foo", component: Foo }]
});
```

### 1.7ã€ ç¬¬ä¸‰æ–¹æ’ä»¶çš„æŒ‰éœ€å¼•å…¥

æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ç»å¸¸ä¼šéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å¼•å…¥æ•´ä¸ªæ’ä»¶ï¼Œä¼šå¯¼è‡´é¡¹ç›®çš„ä½“ç§¯å¤ªå¤§ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© `plugin-syntax-dynamic-import` ï¼Œç„¶åå¯ä»¥åªå¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œä»¥è¾¾åˆ°å‡å°é¡¹ç›®ä½“ç§¯çš„ç›®çš„ã€‚æ­¤å¤„ä»¥å¼•å…¥ `ant-design` å’Œ `iview` ä¸ºä¾‹

**(1)å®‰è£…**

```bash
npm install --save-dev @babel/plugin-syntax-dynamic-import
```

**(2)babel.config.js**

```js
module.exports = {
  presets: [
    [
      "@babel/preset-env",
      {
        targets: {
          browsers: ["last 3 versions", "ie>=9"]
        },
        useBuiltIns: "entry",
        debug: false
      }
    ],
    "@vue/babel-preset-jsx"
  ],
  plugins: [
    "@babel/plugin-transform-runtime",
    "@babel/plugin-syntax-dynamic-import",
    "transform-vue-jsx",
    [
      "import",
      {
        libraryName: "ant-design-vue",
        libraryDirectory: "es",
        style: "css"
      },
      "ant-design-vue"
    ],
    [
      "import",
      {
        libraryName: "iview",
        libraryDirectory: "src/components"
      }
    ]
  ]
};
```

**(3)ç»„ä»¶ä¸­ä½¿ç”¨**

```js
import { Button } from "iview";
```

### 1.8ã€ ä¼˜åŒ–æ— é™åˆ—è¡¨æ€§èƒ½

å¦‚æœä½ çš„åº”ç”¨å­˜åœ¨éå¸¸é•¿æˆ–è€…æ— é™æ»šåŠ¨çš„åˆ—è¡¨ï¼Œé‚£ä¹ˆéœ€è¦é‡‡ç”¨ Â  çª—å£åŒ– Â  çš„æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œåªéœ€è¦æ¸²æŸ“å°‘éƒ¨åˆ†åŒºåŸŸçš„å†…å®¹ï¼Œå‡å°‘é‡æ–°æ¸²æŸ“ç»„ä»¶å’Œåˆ›å»º dom èŠ‚ç‚¹çš„æ—¶é—´ã€‚ ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹å¼€æºé¡¹ç›® [vue-virtual-scroll-list](https://github.com/tangbc/vue-virtual-scroll-list)Â  å’Œ Â [vue-virtual-scroller](https://github.com/Akryum/vue-virtual-scroller) æ¥ä¼˜åŒ–è¿™ç§æ— é™åˆ—è¡¨çš„åœºæ™¯çš„ã€‚

### 1.9ã€ æ—¶é—´åˆ†ç‰‡æ¸²æŸ“å¤§é‡æ•°æ®

ä¼—æ‰€å‘¨çŸ¥ï¼Œé¡µé¢çš„å¡é¡¿æ˜¯ç”±äºåŒæ—¶æ¸²æŸ“å¤§é‡ DOM æ‰€å¼•èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘å°†æ¸²æŸ“è¿‡ç¨‹åˆ†æ‰¹è¿›è¡Œã€‚å¸¸è§çš„åˆ†æ‰¹æ¸²æŸ“ä½¿ç”¨`setTimeout`,`requestAnimationFrame`å’Œ`DocumentFragment`

```html
<ul id="container"></ul>
```

**(1) ä½¿ç”¨ setTimeout åˆ†ç‰‡**

```js
//éœ€è¦æ’å…¥çš„å®¹å™¨
let ul = document.getElementById("container");
// æ’å…¥åä¸‡æ¡æ•°æ®
let total = 100000;
// ä¸€æ¬¡æ’å…¥ 20 æ¡
let once = 20;
//æ€»é¡µæ•°
let page = total / once;
//æ¯æ¡è®°å½•çš„ç´¢å¼•
let index = 0;
//å¾ªç¯åŠ è½½æ•°æ®
function loop(curTotal, curIndex) {
  if (curTotal <= 0) {
    return false;
  }
  //æ¯é¡µå¤šå°‘æ¡
  let pageCount = Math.min(curTotal, once);
  setTimeout(() => {
    for (let i = 0; i < pageCount; i++) {
      let li = document.createElement("li");
      li.innerText = curIndex + i + " : " + ~~(Math.random() * total);
      ul.appendChild(li);
    }
    loop(curTotal - pageCount, curIndex + pageCount);
  }, 0);
}
loop(total, index);
```

> ä½¿ç”¨ setTimeout ä½ ä¼šå‘ç°æ˜æ˜¾çš„é—ªå±ç°è±¡ï¼Œå…¶ä¸»è¦åŸå› å¦‚ä¸‹ï¼š

- setTimeout çš„æ‰§è¡Œæ—¶é—´å¹¶ä¸æ˜¯ç¡®å®šçš„ã€‚åœ¨ JS ä¸­ï¼ŒsetTimeout ä»»åŠ¡è¢«æ”¾è¿›äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ‰ä¼šå»æ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯å¦éœ€è¦æ‰§è¡Œï¼Œå› æ­¤ setTimeout çš„å®é™…æ‰§è¡Œæ—¶é—´å¯èƒ½ä¼šæ¯”å…¶è®¾å®šçš„æ—¶é—´æ™šä¸€äº›ã€‚
- åˆ·æ–°é¢‘ç‡å—å±å¹•åˆ†è¾¨ç‡å’Œå±å¹•å°ºå¯¸çš„å½±å“ï¼Œå› æ­¤ä¸åŒè®¾å¤‡çš„åˆ·æ–°é¢‘ç‡å¯èƒ½ä¼šä¸åŒï¼Œè€Œ setTimeout åªèƒ½è®¾ç½®ä¸€ä¸ªå›ºå®šæ—¶é—´é—´éš”ï¼Œè¿™ä¸ªæ—¶é—´ä¸ä¸€å®šå’Œå±å¹•çš„åˆ·æ–°æ—¶é—´ç›¸åŒã€‚

**(2) ä½¿ç”¨ requestAnimationFrame**

> ä¸ setTimeout ç›¸æ¯”ï¼ŒrequestAnimationFrame æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ç”±ç³»ç»Ÿæ¥å†³å®šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºã€‚å¦‚æœå±å¹•åˆ·æ–°ç‡æ˜¯ 60Hz,é‚£ä¹ˆå›è°ƒå‡½æ•°å°±æ¯ 16.7ms è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåˆ·æ–°ç‡æ˜¯ 75Hzï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶é—´é—´éš”å°±å˜æˆäº† 1000/75=13.3msï¼Œæ¢å¥è¯è¯´å°±æ˜¯ï¼ŒrequestAnimationFrame çš„æ­¥ä¼è·Ÿç€ç³»ç»Ÿçš„åˆ·æ–°æ­¥ä¼èµ°ã€‚å®ƒèƒ½ä¿è¯å›è°ƒå‡½æ•°åœ¨å±å¹•æ¯ä¸€æ¬¡çš„åˆ·æ–°é—´éš”ä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ç°è±¡

```js
//éœ€è¦æ’å…¥çš„å®¹å™¨
let ul = document.getElementById("container");
// æ’å…¥åä¸‡æ¡æ•°æ®
let total = 100000;
// ä¸€æ¬¡æ’å…¥ 20 æ¡
let once = 20;
//æ€»é¡µæ•°
let page = total / once;
//æ¯æ¡è®°å½•çš„ç´¢å¼•
let index = 0;
//å¾ªç¯åŠ è½½æ•°æ®
function loop(curTotal, curIndex) {
  if (curTotal <= 0) {
    return false;
  }
  //æ¯é¡µå¤šå°‘æ¡
  let pageCount = Math.min(curTotal, once);
  window.requestAnimationFrame(function() {
    for (let i = 0; i < pageCount; i++) {
      let li = document.createElement("li");
      li.innerText = curIndex + i + " : " + ~~(Math.random() * total);
      ul.appendChild(li);
    }
    loop(curTotal - pageCount, curIndex + pageCount);
  });
}
loop(total, index);
```

[æ­¤ä¾‹å‚è€ƒè‡ªï¼šã€Œä¸­é«˜çº§å‰ç«¯ã€é«˜æ€§èƒ½æ¸²æŸ“åä¸‡æ¡æ•°æ®ï¼ˆæ—¶é—´åˆ†ç‰‡ï¼‰](https://juejin.im/post/5d76f469f265da039a28aff7)

**(3) ä½¿ç”¨ DocumentFragment**

ä» MDN çš„è¯´æ˜ä¸­ï¼Œæˆ‘ä»¬å¾—çŸ¥ DocumentFragments æ˜¯ DOM èŠ‚ç‚¹ï¼Œä½†å¹¶ä¸æ˜¯ DOM æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢å›æµã€‚

```js
//éœ€è¦æ’å…¥çš„å®¹å™¨
let ul = document.getElementById("container");
// æ’å…¥åä¸‡æ¡æ•°æ®
let total = 100000;
// ä¸€æ¬¡æ’å…¥ 20 æ¡
let once = 20;
//æ€»é¡µæ•°
let page = total / once;
//æ¯æ¡è®°å½•çš„ç´¢å¼•
let index = 0;
//å¾ªç¯åŠ è½½æ•°æ®
function loop(curTotal, curIndex) {
  if (curTotal <= 0) {
    return false;
  }
  //æ¯é¡µå¤šå°‘æ¡
  let pageCount = Math.min(curTotal, once);
  window.requestAnimationFrame(function() {
    let fragment = document.createDocumentFragment();
    for (let i = 0; i < pageCount; i++) {
      let li = document.createElement("li");
      li.innerText = curIndex + i + " : " + ~~(Math.random() * total);
      fragment.appendChild(li);
    }
    ul.appendChild(fragment);
    loop(curTotal - pageCount, curIndex + pageCount);
  });
}
loop(total, index);
```

### 1.10ã€æœåŠ¡ç«¯æ¸²æŸ“ SSR or é¢„æ¸²æŸ“

æœåŠ¡ç«¯æ¸²æŸ“æ˜¯æŒ‡ Vue åœ¨å®¢æˆ·ç«¯å°†æ ‡ç­¾æ¸²æŸ“æˆçš„æ•´ä¸ª html ç‰‡æ®µçš„å·¥ä½œåœ¨æœåŠ¡ç«¯å®Œæˆï¼ŒæœåŠ¡ç«¯å½¢æˆçš„ html ç‰‡æ®µç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯è¿™ä¸ªè¿‡ç¨‹å°±å«åšæœåŠ¡ç«¯æ¸²æŸ“ã€‚

**ï¼ˆ1ï¼‰æœåŠ¡ç«¯æ¸²æŸ“çš„ä¼˜ç‚¹ï¼š**

- **æ›´å¥½çš„ SEO**ï¼š å› ä¸º SPA é¡µé¢çš„å†…å®¹æ˜¯é€šè¿‡ Ajax è·å–ï¼Œè€Œæœç´¢å¼•æ“çˆ¬å–å·¥å…·å¹¶ä¸ä¼šç­‰å¾… Ajax å¼‚æ­¥å®Œæˆåå†æŠ“å–é¡µé¢å†…å®¹ï¼Œæ‰€ä»¥åœ¨ SPA ä¸­æ˜¯æŠ“å–ä¸åˆ°é¡µé¢é€šè¿‡ Ajax è·å–åˆ°çš„å†…å®¹ï¼›è€Œ SSR æ˜¯ç›´æ¥ç”±æœåŠ¡ç«¯è¿”å›å·²ç»æ¸²æŸ“å¥½çš„é¡µé¢ï¼ˆæ•°æ®å·²ç»åŒ…å«åœ¨é¡µé¢ä¸­ï¼‰ï¼Œæ‰€ä»¥æœç´¢å¼•æ“çˆ¬å–å·¥å…·å¯ä»¥æŠ“å–æ¸²æŸ“å¥½çš„é¡µé¢ï¼›

* **æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼ˆé¦–å±åŠ è½½æ›´å¿«ï¼‰**ï¼š SPA ä¼šç­‰å¾…æ‰€æœ‰ Vue ç¼–è¯‘åçš„ js æ–‡ä»¶éƒ½ä¸‹è½½å®Œæˆåï¼Œæ‰å¼€å§‹è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼Œæ–‡ä»¶ä¸‹è½½ç­‰éœ€è¦ä¸€å®šçš„æ—¶é—´ç­‰ï¼Œæ‰€ä»¥é¦–å±æ¸²æŸ“éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼›SSR ç›´æ¥ç”±æœåŠ¡ç«¯æ¸²æŸ“å¥½é¡µé¢ç›´æ¥è¿”å›æ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…ä¸‹è½½ js æ–‡ä»¶åŠå†å»æ¸²æŸ“ç­‰ï¼Œæ‰€ä»¥ SSR æœ‰æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼›

**ï¼ˆ2ï¼‰æœåŠ¡ç«¯æ¸²æŸ“çš„ç¼ºç‚¹ï¼š**

- **æ›´å¤šçš„å¼€å‘æ¡ä»¶é™åˆ¶**ï¼š ä¾‹å¦‚æœåŠ¡ç«¯æ¸²æŸ“åªæ”¯æŒ beforCreate å’Œ created ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›å¤–éƒ¨æ‰©å±•åº“éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œæ‰èƒ½åœ¨æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºä¸­è¿è¡Œï¼›å¹¶ä¸”ä¸å¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¸Šçš„å®Œå…¨é™æ€å•é¡µé¢åº”ç”¨ç¨‹åº SPA ä¸åŒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºï¼Œ`éœ€è¦å¤„äº Node.js server è¿è¡Œç¯å¢ƒ`ï¼›

* **æ›´å¤šçš„æœåŠ¡å™¨è´Ÿè½½**ï¼šåœ¨ Node.js ä¸­æ¸²æŸ“å®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œæ˜¾ç„¶ä¼šæ¯”ä»…ä»…æä¾›é™æ€æ–‡ä»¶çš„ server æ›´åŠ å¤§é‡å ç”¨ CPU èµ„æºï¼Œå› æ­¤å¦‚æœä½ é¢„æ–™åœ¨é«˜æµé‡ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œè¯·å‡†å¤‡ç›¸åº”çš„æœåŠ¡å™¨è´Ÿè½½ï¼Œå¹¶æ˜æ™ºåœ°é‡‡ç”¨ç¼“å­˜ç­–ç•¥ã€‚

### 1.11ã€ å¤„ç†å¤§é‡æ•°æ®ä½¿ç”¨ Web Woker

Web Worker é€šå¸¸åº”ç”¨äºå“ªäº›æ–¹é¢å‘¢ï¼Ÿ

- å¤„ç†å¯†é›†å‹æ•°å­¦è®¡ç®—
- å¤§æ•°æ®é›†æ’åº
- æ•°æ®å¤„ç†ï¼ˆå‹ç¼©ã€éŸ³é¢‘åˆ†æã€å›¾åƒå¤„ç†ç­‰ï¼‰
- é«˜æµé‡ç½‘ç»œé€šä¿¡

**(1)ã€Work åˆ›å»ºåŠç»ˆæ­¢**

**å®ä¾‹åŒ–**

```js
//1. å®ä¾‹åŒ–woker,
var w1 = new Worker("http://some.url.1/mycoolworker.js");
```

- è¿™ä¸ª URL åº”è¯¥`æŒ‡å‘ä¸€ä¸ª JavaScript æ–‡ä»¶çš„ä½ç½®ï¼ˆ`è€Œä¸æ˜¯ä¸€ä¸ª HTML é¡µé¢ï¼ï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶å°†è¢«åŠ è½½åˆ°ä¸€ä¸ª Worker ä¸­ã€‚ç„¶åæµè§ˆå™¨`å¯åŠ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹`ï¼Œè®©è¿™ä¸ªæ–‡ä»¶åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­ä½œä¸ºç‹¬ç«‹çš„ç¨‹åºè¿è¡Œã€‚

- **å¦‚æœæµè§ˆå™¨ä¸­æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªé¡µé¢ï¼ˆæˆ–åŒä¸€é¡µä¸Šçš„å¤šä¸ª tab ï¼ï¼‰è¯•å›¾ä»åŒä¸€ä¸ªæ–‡ä»¶ URL åˆ›å»º Workerï¼Œé‚£ä¹ˆæœ€ç»ˆå¾—åˆ°çš„å®é™…ä¸Šæ˜¯å®Œå…¨ç‹¬ç«‹çš„ Worker**

**(2)ã€æ•°æ®æ”¶å‘**

> `Worke`r ä¹‹é—´ä»¥åŠå®ƒä»¬å’Œ`ä¸»ç¨‹åºä¹‹é—´ï¼Œ`ä¸ä¼šå…±äº«ä»»ä½•ä½œç”¨åŸŸæˆ–èµ„æº`ï¼Œé‚£ä¼šæŠŠæ‰€æœ‰å¤šçº¿ç¨‹ç¼–ç¨‹çš„å™©æ¢¦å¸¦åˆ°å‰ç«¯é¢†åŸŸï¼Œè€Œæ˜¯`é€šè¿‡`ä¸€ä¸ª`åŸºæœ¬çš„äº‹ä»¶æ¶ˆæ¯æœºåˆ¶ç›¸äº’è”ç³»`;

```js
//2. æ•°æ®çš„è·å–ï¼ˆä¸»çº¿ç¨‹å‘é€æ¶ˆæ¯ç»™wokerï¼‰
w1.addEventListener("message", function(evt) {
  // evt.data
});

//æ•°æ®çš„å‘é€(ä¸»çº¿ç¨‹æ”¶åˆ°wokerçš„ä¿¡æ¯)
w1.postMessage("something cool to say");

// mydemo_woker.js
//åœ¨workerå†…éƒ¨ï¼Œç›‘å¬ä¸»çº¿ç¨‹å‘ç»™è‡ªå·±çš„ä¿¡æ¯
addEventListener("message", function(evt) {
  // evt.data
});
//å‘é€æ•°æ®ç»™ä¸»çº¿ç¨‹
postMessage("a really cool reply");
```

**æ³¨æ„ï¼Œä¸“ç”¨ Worker å’Œåˆ›å»ºå®ƒçš„ç¨‹åºä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚**

> é€šå¸¸ç”±`ä¸»é¡µé¢`åº”ç”¨ç¨‹åº`åˆ›å»º Worke`rï¼Œä½†`è‹¥æ˜¯éœ€è¦`çš„è¯ï¼Œ`Worker` ä¹Ÿå¯ä»¥`å®ä¾‹åŒ–`å®ƒè‡ªå·±çš„`å­ Worker`ï¼Œç§°ä¸º subworkerã€‚æœ‰æ—¶å€™ï¼ŒæŠŠè¿™æ ·çš„ç»†èŠ‚å§”æ‰˜ç»™ä¸€ä¸ªâ€œä¸»â€Workerï¼Œç”±å®ƒæ¥åˆ›å»ºå…¶ä»– Worker å¤„ç†éƒ¨åˆ†ä»»åŠ¡ï¼Œè¿™æ ·å¾ˆæœ‰ç”¨ã€‚`ä¸å¹¸çš„æ˜¯`ï¼Œåˆ°å†™ä½œæœ¬ä¹¦æ—¶ä¸º
> æ­¢ï¼Œ`Chrome è¿˜ä¸æ”¯æŒ subworker`ï¼Œä¸è¿‡ Firefox æ”¯æŒã€‚

**(3)ã€Work çš„ç»ˆæ­¢**

```js
//ä¸»é¡µé¢æ‰‹åŠ¨ç»ˆæ­¢
w1.terminate();
```

> çªç„¶ç»ˆæ­¢ Worker çº¿ç¨‹ä¸ä¼šç»™å®ƒä»»ä½•æœºä¼šå®Œæˆå®ƒçš„å·¥ä½œæˆ–è€…æ¸…ç†ä»»ä½•èµ„æºã€‚è¿™å°±ç±»ä¼¼äºé€šè¿‡å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µæ¥å…³é—­é¡µé¢ã€‚

**(4)ã€Work è¿è¡Œç¯å¢ƒåŠå¤–éƒ¨è„šæœ¬åŠ è½½**

> **Work ä¸å¯ä»¥è®¿é—®ä¸»ç¨‹åºçš„ä»»ä½•èµ„æºï¼Œä¸èƒ½è®¿é—® dom æˆ–è€…å…¶ä»–èµ„æºï¼Œä½†æ˜¯å¯ä»¥æ‰§è¡Œç½‘ç»œæ“ ä½œï¼ˆAjaxã€WebSocketsï¼‰ä»¥åŠè®¾å®šå®šæ—¶ å™¨ã€‚è¿˜ æœ‰ï¼ŒWorker å¯ä»¥è®¿é—®å‡ ä¸ªé‡è¦çš„å…¨å±€å˜é‡å’ŒåŠŸèƒ½çš„æœ¬åœ°å¤ æœ¬ï¼ŒåŒ…æ‹¬ navigator ã€location ã€JSON å’Œ applicationCache**

**å¯ä»¥é€šè¿‡ importScripts(..) å‘ Worker åŠ è½½é¢å¤–çš„ JavaScript è„šæœ¬ï¼š**

```js
// åœ¨Workerå†…éƒ¨
importScripts("foo.js", "bar.js");
```

**è¿™äº›è„šæœ¬åŠ è½½æ˜¯åŒæ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒimportScripts(..) è°ƒç”¨ä¼šé˜»å¡ä½™ä¸‹ Worker çš„æ‰§è¡Œï¼Œç›´åˆ°æ–‡ä»¶åŠ è½½å’Œæ‰§è¡Œå®Œæˆã€‚**

### 1.12ã€ å‡å°‘é‡ç»˜å’Œå›æµ

`é‡ç»˜`å°±æ˜¯åœ¨ä¸å½±å“æ’ç‰ˆçš„æƒ…å†µä¸‹å¯¹è¿™ä¸ªå…ƒç´ é‡æ–°ç»˜åˆ¶çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„èƒŒæ™¯é¢œè‰²ã€å­—ä½“é¢œè‰²ç­‰ã€‚

`å›æµ`ï¼šå½“ render tree ä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ–å…¨éƒ¨ï¼‰å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æ„å»ºã€‚

**å¸¸è§çš„è§¦å‘é‡ç»˜å’Œå›æµçš„æƒ…å†µï¼š**

- æ·»åŠ ã€åˆ é™¤å…ƒç´ ï¼ˆå›æµ+é‡ç»˜ï¼‰
- éšè—å…ƒç´ ï¼Œdisplay:none(å›æµ+é‡ç»˜)ï¼Œvisibility:hidden(åªé‡ç»˜ï¼Œä¸å›æµ)
- ç§»åŠ¨å…ƒç´ ï¼Œæ¯”å¦‚æ”¹å˜ topã€leftï¼ˆjquery çš„ animate æ–¹æ³•å°±æ˜¯æ”¹å˜ topã€left ä¸ä¸€å®šä¼šå½±å“å›æµï¼‰ï¼Œæˆ–è€…ç§»åŠ¨å…ƒç´ åˆ°å¦å¤– 1 ä¸ªçˆ¶å…ƒç´ ä¸­ã€‚(é‡ç»˜+å›æµ)
- å¯¹ style çš„æ“ä½œï¼ˆå¯¹ä¸åŒçš„å±æ€§æ“ä½œï¼Œå½±å“ä¸ä¸€æ ·ï¼‰ï¼ˆcolorã€background-colorï¼‰=>(é‡ç»˜) (paddingã€margin)=>(å›æµ)
- æµè§ˆå™¨å¤§å°æ”¹å˜ resizeã€font-sizeï¼ˆé‡ç»˜+å›æµï¼‰
- transform/opacity ï¼ˆä¸ä¼šè§¦å‘ç”Ÿé‡ç»˜ã€å›æµï¼‰
- æœ€å¤æ‚çš„ä¸€ç§ï¼šè·å–æŸäº›å±æ€§ï¼Œå¼•å‘å›æµ å¾ˆå¤šæµè§ˆå™¨ä¼šå¯¹å›æµåšä¼˜åŒ–ï¼Œä»–ä¼šç­‰åˆ°è¶³å¤Ÿæ•°é‡çš„å˜åŒ–å‘ç”Ÿï¼Œåœ¨åšä¸€æ¬¡æ‰¹å¤„ç†å›æµã€‚ ä½†æ˜¯é™¤äº† render æ ‘çš„ç›´æ¥å˜åŒ–ã€‚ å½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºäº†è·å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘å›æµã€‚
  - offsetTop, offsetLeft, offsetWidth, offsetHeight
  - scrollTop/Left/Width/Height
  - clientTop/Left/Width/Height
  - width,height
  - è°ƒç”¨äº† getComputedStyle(), æˆ–è€… IE çš„ currentStyle

::: tip
å‡å°‘é‡ç»˜å’Œå›æµæ–¹æ¡ˆ:

- **é¿å…é€é¡¹æ›´æ”¹æ ·å¼**ã€‚æœ€å¥½ä¸€æ¬¡æ€§æ›´æ”¹ style å±æ€§ï¼Œæˆ–è€…å°†æ ·å¼åˆ—è¡¨å®šä¹‰ä¸º class å¹¶ä¸€æ¬¡æ€§æ›´æ”¹ class å±æ€§ã€‚
- **é¿å…å¾ªç¯æ“ä½œ DOM**ã€‚åˆ›å»ºä¸€ä¸ª documentFragment æˆ– divï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰ DOM æ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ° window.documentã€‚
- **é¿å…å¤šæ¬¡è¯»å– offsetLeft ç­‰å±æ€§**ã€‚æ— æ³•é¿å…åˆ™å°†å®ƒä»¬ç¼“å­˜åˆ°å˜é‡ã€‚
- **å°†å¤æ‚çš„å…ƒç´ ç»å¯¹å®šä½æˆ–å›ºå®šå®šä½ï¼Œä½¿å®ƒè„±ç¦»æ–‡æ¡£æµ**ã€‚å¦åˆ™å›æµä»£ä»·ååˆ†é«˜
- **ä¸è¦ä½¿ç”¨ table å¸ƒå±€**ï¼Œå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª table çš„é‡æ–°å¸ƒå±€
- åŠ¨ç”»å®ç°çš„é€Ÿåº¦çš„é€‰æ‹©ï¼ŒåŠ¨ç”»é€Ÿåº¦è¶Šå¿«ï¼Œå›æµæ¬¡æ•°è¶Šå¤šï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ requestAnimationFrame
- CSS é€‰æ‹©ç¬¦ä»å³å¾€å·¦åŒ¹é…æŸ¥æ‰¾ï¼Œ**é¿å… DOM æ·±åº¦è¿‡æ·±**
- **ä½¿ç”¨ visibility æ›¿æ¢ display: none** ï¼Œå› ä¸ºå‰è€…åªä¼šå¼•èµ·é‡ç»˜ï¼Œåè€…ä¼šå¼•å‘å›æµï¼ˆæ”¹å˜äº†å¸ƒå±€ï¼‰
- **ä½¿ç”¨ translate æ›¿ä»£ top**
- æŠŠ DOM ç¦»çº¿åä¿®æ”¹ï¼Œæ¯”å¦‚ï¼šå…ˆæŠŠ DOM ç»™ display:none (æœ‰ä¸€æ¬¡ Reflow)ï¼Œç„¶åä½ ä¿®æ”¹ 100 æ¬¡ï¼Œç„¶åå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥
- **ä½¿ç”¨ flexbox æ›¿ä»£è€çš„å¸ƒå±€æ¨¡å‹**
  ã€‚
  :::

### 1.13ã€ å‡½æ•°é˜²æŠ–å’ŒèŠ‚æµ

**é˜²æŠ–ï¼ˆdebounceï¼‰**

> æ‰€è°“é˜²æŠ–ï¼Œå°±æ˜¯æŒ‡è§¦å‘äº‹ä»¶ååœ¨ n ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚

```js
function debounce(func, wait) {
  let timeout;
  return function() {
    let context = this;
    let args = arguments;
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(() => {
      func.apply(context, args);
    }, wait);
  };
}
```

**èŠ‚æµï¼ˆthrottleï¼‰**

> æ‰€è°“èŠ‚æµï¼Œå°±æ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ä½†æ˜¯åœ¨ n ç§’ä¸­åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°

```js
function throttle(func, wait) {
  let timeout;
  return function() {
    let context = this;
    let args = arguments;
    if (!timeout) {
      timeout = setTimeout(() => {
        timeout = null;
        func.apply(context, args);
      }, wait);
    }
  };
}
```

### 1.14ã€SystemJS åŠ¨æ€åŠ è½½ js

[systemjs](https://github.com/systemjs/systemjs)å¯ä»¥ç»“åˆ vue çš„åŠ¨æ€ç»„ä»¶å®ç°ï¼Œvue ç»„ä»¶åŠ¨æ€åŒ–ï¼Œæœ¬åœ°ä»£ç æœ€å°åŒ–ã€‚

```js
<script src="./system.js"> </script>
<script>
SystemJS.import("onejs").then(function(m) {
  Vue.component("component-name",m.default)
});
</script>
```

## äºŒã€å‰ç«¯æ€§èƒ½æ¸…å•

### ç›®å½•

1. **[HTML](#html)**
2. **[CSS](#css)**
3. **[Fonts](#fonts)**
4. **[Images](#images)**
5. **[JavaScript](#javascript)**
6. **[Server](#server) (æ¢³ç†ä¸­)**
7. **[JS Frameworks](#js-frameworks) (æ¢³ç†ä¸­)**

### æ¦‚è¿°

æ€§èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¸»é¢˜ï¼Œä½†å®ƒå¹¶ä¸æ€»æ˜¯ä¸€ä¸ªâ€œåç«¯â€æˆ–â€œç®¡ç†ï¼ˆadminï¼‰â€æ‰€è¦è€ƒè™‘çš„ä¸»é¢˜ï¼šå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‰ç«¯éœ€è¦è€ƒè™‘çš„ã€‚ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œå‰ç«¯æ€§èƒ½æ¸…å•æ˜¯ä½ åœ¨é¡¹ç›®ä¸­åº”è¯¥æ£€æŸ¥æˆ–è€…è‡³å°‘éœ€è¦æ³¨æ„çš„æ€§èƒ½è¦ç‚¹çš„è¯¦å°½åˆ—è¡¨ã€‚

#### å¦‚ä½•ä½¿ç”¨?

å¯¹äºæ¯ä¸ªè§„åˆ™ï¼Œå°†æœ‰ä¸€ä¸ªæ®µè½è§£é‡Š**ä¸ºä»€ä¹ˆ**æ­¤è§„åˆ™å¾ˆé‡è¦ä»¥åŠ**å¦‚ä½•**è§£å†³å®ƒã€‚æœ‰å…³æ›´æ·±å…¥çš„ä¿¡æ¯ï¼Œå¯ç›¸åº”æ‰¾åˆ°å¯æŒ‡å‘çš„ ğŸ›  å·¥å…·ï¼ŒğŸ“– æ–‡ç« æˆ– ğŸ“¹ åª’ä½“çš„é“¾æ¥ï¼Œä»¥ä¾¿æ¢³ç†ã€‚

å‰ç«¯æ€§èƒ½æ¸…å•ä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½æ˜¯è·å¾—æœ€é«˜æ€§èƒ½å¾—åˆ†çš„åŸºæœ¬è¦ç´ ï¼Œä½†æ˜¯ä½ å¯ä»¥æ‰¾åˆ°ä¸€äº›æŒ‡æ ‡æ¥å¸®åŠ©ä½ æœ€ç»ˆç¡®å®šä¸€äº›è§„åˆ™çš„ä¼˜å…ˆé¡ºåºã€‚ä»¥ä¸‹æœ‰ 3 ä¸ªçº§åˆ«çš„ä¼˜å…ˆçº§ï¼š

- ![low](https://img.shields.io/badge/-low-green)[low] è¡¨ç¤ºè¯¥é¡¹ç›®çš„ä¼˜å…ˆçº§**è¾ƒä½**ï¼Œå¯¹é¡¹ç›®æœ‰å½±å“ã€‚
- ![medium](https://img.shields.io/badge/-medium-orange)[medium] è¡¨ç¤ºè¯¥é¡¹ç›®å…·æœ‰**ä¸­ç­‰ä¼˜å…ˆçº§**å¹¶å¯¹é¡¹ç›®äº§ç”Ÿå½±å“ï¼Œå¼€å‘æ—¶éœ€è¦å¤„ç†è¿™äº›é¡¹ç›®ã€‚
- ![high](https://img.shields.io/badge/-high-red)[high] è¡¨ç¤ºè¯¥é¡¹ç›®å…·æœ‰**é«˜ä¼˜å…ˆçº§**å¹¶å¯¹é¡¹ç›®äº§ç”Ÿå½±å“ï¼Œå¼€å‘æ—¶å¿…é¡»è¦å¤„ç†è¿™äº›é¡¹ç›®ï¼Œä¸ç„¶æ€§èƒ½å°†å¤§æ‰“æŠ˜æ‰£ã€‚

#### æ€§èƒ½æµ‹è¯•å·¥å…·

ä»¥ä¸‹æ˜¯ä¸€äº›æ‚¨å¯ä»¥ç”¨æ¥æµ‹è¯•æˆ–ç›‘æ§æ‚¨çš„ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºçš„å·¥å…·ï¼š

- ğŸ›  [WebPagetest - Website Performance and Optimization Test](https://www.webpagetest.org/)
- ğŸ›  â˜† [Dareboost: Website Speed Test and Website Analysis](https://www.dareboost.com/) (use the coupon WPCDD20 for -20%)
- ğŸ›  [GTmetrix | Website Speed and Performance Optimization](https://gtmetrix.com/)
- ğŸ›  [PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/)
- ğŸ›  [Web.dev](https://web.dev/measure)
- ğŸ›  [Pingdom Website Speed Test](https://tools.pingdom.com)
- ğŸ“– [Pagespeed - The tool and optimization guide](https://varvy.com/pagespeed/)
- ğŸ“– [Make the Web FasterÂ | Google Developers](https://developers.google.com/speed/)
- ğŸ›  [Sitespeed.io - Welcome to the wonderful world of Web Performance](https://www.sitespeed.io/)
- ğŸ›  [Calibre](https://calibreapp.com/)
- ğŸ›  [Website Speed Test | Check Web Performance &raquo; Dotcom-Tools](https://www.dotcom-tools.com/website-speed-test.aspx)
- ğŸ›  [Website and Server Uptime Monitoring - Pingdom](https://www.pingdom.com/product/uptime-monitoring/) ([Free Signup Link](https://www.pingdom.com/free))
- ğŸ›  [Uptime Robot](https://uptimerobot.com)
- ğŸ›  [SpeedCurve: Monitor front-end performance](https://speedcurve.com)
- ğŸ›  [PWMetrics - CLI tool and lib to gather performance metrics](https://github.com/paulirish/pwmetrics)
- ğŸ›  [Varvy - Page speed optimization](https://varvy.com/pagespeed/)
- ğŸ›  [Lighthouse - Google](https://developers.google.com/web/tools/lighthouse/#devtools)
- ğŸ›  [Checkbot browser extension - Checks for web performance best practices](https://www.checkbot.io/)
- ğŸ›  [Yellow Lab Tools | Online test to help speeding up heavy web pages](https://yellowlab.tools/)
- ğŸ›  [Speedrank - Web Performance Monitoring](https://speedrank.app/)
- ğŸ›  [DebugBear - Monitor website performance and Lighthouse scores](https://www.debugbear.com/)

#### å‚è€ƒ

- ğŸ“– [The Cost Of JavaScript - YouTube](https://www.youtube.com/watch?v=_bzqF05xsC4)
- ğŸ“– [AddyOsmani.com - Start Performance Budgeting](https://addyosmani.com/blog/performance-budgets/)
- ğŸ“– [Get Started With Analyzing Runtime Performance Â |Â  Google Developers](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/)
- ğŸ“– [State of the Web | 2018_01_01](https://httparchive.org/reports/state-of-the-web?start=2018_01_01)
- ğŸ“– [Page Weight Doesn't Matter](https://www.speedshop.co/2015/11/05/page-weight-doesnt-matter.html)
- ğŸ“– [Front-End Performance Checklist 2018 [PDF, Apple Pages]](https://www.smashingmagazine.com/2018/01/front-end-performance-checklist-2018-pdf-pages/)
- ğŸ“– [Designing for Performance Weighing Aesthetics and Speed - By Lara Callender Hogan [eBook, Print]](http://designingforperformance.com/index.html)
- ğŸ“– [Varvy - Web performance glossary](https://varvy.com/performance/)
- ğŸ“– [fabkrum/web-performance-resources: Up to date collection of valuable web performance resources](https://github.com/fabkrum/web-performance-resources)
- ğŸ“– [Checkbot - Web Speed Best Practices](https://www.checkbot.io/guide/speed/)
- ğŸ›  [Progressive Tooling - A list of community-built, third-party tools that can be used to improve page performance](https://progressivetooling.com/)

---

### HTML

![html](/html.png)

- [ ] **å‹ç¼© HTML:** ![medium](https://img.shields.io/badge/-medium-orange) HTML ä»£ç å‹ç¼©ï¼Œå°†æ³¨é‡Šã€ç©ºæ ¼å’Œæ–°è¡Œä»ç”Ÿäº§æ–‡ä»¶ä¸­åˆ é™¤ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > åˆ é™¤æ‰€æœ‰ä¸å¿…è¦çš„ç©ºæ ¼ã€æ³¨é‡Šå’Œä¸­æ–­è¡Œå°†å‡å°‘ HTML çš„å¤§å°ï¼ŒåŠ å¿«ç½‘ç«™çš„é¡µé¢åŠ è½½æ—¶é—´ï¼Œå¹¶æ˜¾è‘—å‡å°‘ç”¨æˆ·çš„ä¸‹è½½æ—¶é—´ã€‚

  _æ€ä¹ˆåšï¼š_

  > å¤§å¤šæ•°æ¡†æ¶éƒ½æœ‰æ’ä»¶ç”¨æ¥å‹ç¼©ç½‘é¡µçš„ä½“ç§¯ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ç»„å¯ä»¥è‡ªåŠ¨å®Œæˆå·¥ä½œçš„ NPM æ¨¡å—ã€‚

  - ğŸ›  [HTML minifier | Minify Code](http://minifycode.com/html-minifier/)
  - ğŸ“– [Experimenting with HTML minifier â€” Perfection Kills](http://perfectionkills.com/experimenting-with-html-minifier/#use_short_doctype)

- [ ] **åˆ é™¤ä¸å¿…è¦çš„æ³¨é‡Šï¼š** ![low](https://img.shields.io/badge/-low-green) ç¡®ä¿ä»æ‚¨çš„ç½‘é¡µä¸­åˆ é™¤æ³¨é‡Šã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > æ³¨é‡Šå¯¹ç”¨æˆ·æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œåº”è¯¥ä»ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶ä¸­åˆ é™¤ã€‚å¯èƒ½éœ€è¦ä¿ç•™æ³¨é‡Šçš„ä¸€ç§æƒ…å†µæ˜¯ï¼šä¿ç•™è¿œç«¯ä»£ç åº“ï¼ˆkeep the origin for a libraryï¼‰ã€‚

  _æ€ä¹ˆåšï¼š_

  > å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ HTML minify æ’ä»¶åˆ é™¤æ³¨é‡Šã€‚

* ğŸ›  [remove-html-comments - npm](https://www.npmjs.com/package/remove-html-comments)

- [ ] **åˆ é™¤ä¸å¿…è¦çš„å±æ€§ï¼š** ![low](https://img.shields.io/badge/-low-green) åƒ `type="text/javascript"` or `type="text/css"` è¿™æ ·çš„å±æ€§åº”è¯¥è¢«ç§»é™¤ã€‚

  ```html
  <!-- Before HTML5 -->
  <script type="text/javascript">
    // Javascript code
  </script>

  <!-- Today -->
  <script>
    // Javascript code
  </script>
  ```

  _ä¸ºä»€ä¹ˆ_

  > ç±»å‹å±æ€§ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸º HTML5 æŠŠ text/css å’Œ text/javascript ä½œä¸ºé»˜è®¤å€¼ã€‚æ²¡ç”¨çš„ä»£ç åº”åœ¨ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºä¸­åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬ä¼šä½¿ç½‘é¡µä½“ç§¯å¢å¤§ã€‚

  _æ€ä¹ˆåšï¼š_

  > âƒ `ç¡®ä¿æ‰€æœ‰`<link/>`å’Œ`<script></script>`æ ‡è®°éƒ½æ²¡æœ‰ä»»ä½• type å±æ€§ã€‚

  - ğŸ“– [The Script Tag | CSS-Tricks](https://css-tricks.com/the-script-tag/)

- [ ] **åœ¨ JavaScript å¼•ç”¨ä¹‹å‰å¼•ç”¨ CSS æ ‡è®°ï¼š** ![high](https://img.shields.io/badge/-high-red) ç¡®ä¿åœ¨ä½¿ç”¨ JavaScript ä»£ç ä¹‹å‰åŠ è½½ CSSã€‚

  ```html
  <!-- ä¸æ¨è -->
  <script src="jquery.js"></script>
  <script src="foo.js"></script>
  <link rel="stylesheet" href="foo.css" />

  <!-- æ¨è -->
  <link rel="stylesheet" href="foo.css" />
  <script src="jquery.js"></script>
  <script src="foo.js"></script>
  ```

  _ä¸ºä»€ä¹ˆï¼š_

  > åœ¨å¼•ç”¨ JavaScript ä¹‹å‰å¼•ç”¨ CSS å¯ä»¥å®ç°æ›´å¥½åœ°å¹¶è¡Œä¸‹è½½ï¼Œä»è€ŒåŠ å¿«æµè§ˆå™¨çš„æ¸²æŸ“é€Ÿåº¦ã€‚

  _æ€ä¹ˆåšï¼š_

  > ç¡®ä¿`<head>`ä¸­çš„`<link/>`å’Œ`<style/>`å§‹ç»ˆä½äº`<script/>`ä¹‹å‰ã€‚

  - ğŸ“– [åˆç†å®‰æ’ styles å’Œ scripts æ¥æé«˜ç½‘é¡µé€Ÿåº¦](https://varvy.com/pagespeed/style-script-order.html)

- [ ] **æœ€å°åŒ– iframe çš„æ•°é‡ï¼š** ![high](https://img.shields.io/badge/-high-red) ä»…åœ¨æ²¡æœ‰ä»»ä½•å…¶ä»–æŠ€æœ¯å¯è¡Œæ€§æ—¶æ‰ä½¿ç”¨ iframeã€‚å°½é‡é¿å…ä½¿ç”¨ iframeã€‚

- [ ] **DNS é¢„å–ï¼š** ![high](https://img.shields.io/badge/-high-red) ä¸€æ¬¡ DNS æŸ¥è¯¢æ—¶é—´å¤§æ¦‚åœ¨ 60-120ms ä¹‹é—´æˆ–è€…æ›´é•¿ï¼Œæå‰è§£æç½‘é¡µä¸­å¯èƒ½çš„ç½‘ç»œè¿æ¥åŸŸå
  ```html
  <link rel="dns-prefetch" href="http://example.com/" />
  ```

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

### CSS

![css](/css.png)

- [ ] **å‹ç¼©:** ![high](https://img.shields.io/badge/-high-red) æ‰€æœ‰ CSS æ–‡ä»¶éƒ½éœ€è¦è¢«å‹ç¼©ï¼Œä»ç”Ÿäº§æ–‡ä»¶ä¸­åˆ é™¤æ³¨é‡Šï¼Œç©ºæ ¼å’Œç©ºè¡Œã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ç¼©å° CSS æ–‡ä»¶åï¼Œå†…å®¹åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä¸”å°†æ›´å°‘çš„æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ä¸­ç¼©å° CSS æ–‡ä»¶æ˜¯éå¸¸é‡è¦ï¼Œè¿™å¯¹ç”¨æˆ·æ˜¯æœ‰ç›Šçš„ï¼Œå°±åƒä»»ä½•ä¼ä¸šæƒ³è¦é™ä½å¸¦å®½æˆæœ¬å’Œé™ä½èµ„æºã€‚

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨å·¥å…·åœ¨æ„å»ºæˆ–éƒ¨ç½²ä¹‹å‰è‡ªåŠ¨å‹ç¼©æ–‡ä»¶ã€‚

  - ğŸ›  [cssnano: åŸºäº PostCSS ç”Ÿæ€ç³»ç»Ÿçš„æ¨¡å—åŒ–å‹ç¼©å·¥å…·ã€‚](https://cssnano.co/)
  - ğŸ›  [@neutrinojs/style-minify - npm](https://www.npmjs.com/package/@neutrinojs/style-minify)
  - ğŸ›  [Online CSS Compressor](http://refresh-sf.com)

- [ ] **Concatenation:** ![medium](https://img.shields.io/badge/-medium-orange) CSS æ–‡ä»¶åˆå¹¶ï¼ˆå¯¹äº HTTP/2 æ•ˆæœä¸æ˜¯å¾ˆå¤§ï¼‰ã€‚

  ```html
  <!-- ä¸æ¨è -->
  <link rel="stylesheet" src="foo.css" />
  <link rel="stylesheet" src="ajax.css" />

  <!-- æ¨è -->
  <link rel="stylesheet" src="combined.css" />
  ```

  _ä¸ºä»€ä¹ˆï¼š_

  > å¦‚æœä½ è¿˜åœ¨ä½¿ç”¨ HTTP/1ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦åˆå¹¶ä½ çš„æ–‡ä»¶ã€‚ä¸è¿‡åœ¨ä½¿ç”¨ HTTP/2 çš„æƒ…å†µä¸‹ä¸ç”¨è¿™æ ·ï¼ˆæ•ˆæœå¾…æµ‹è¯•ï¼‰ã€‚

  _æ€ä¹ˆåšï¼š_

  > åœ¨æ„å»ºæˆ–éƒ¨ç½²ä¹‹å‰ä½¿ç”¨åœ¨çº¿å·¥å…·æˆ–è€…å…¶ä»–æ’ä»¶æ¥åˆå¹¶æ–‡ä»¶ã€‚
  > å½“ç„¶ï¼Œè¦ç¡®ä¿åˆå¹¶æ–‡ä»¶åé¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œã€‚

  - ğŸ“– [HTTP: ä¼˜åŒ–åº”ç”¨ç¨‹åºäº¤ä»˜ - é«˜æ€§èƒ½æµè§ˆå™¨ç½‘ç»œ (O'Reilly)](https://hpbn.co/optimizing-application-delivery/#optimizing-for-http2)
  - ğŸ“– [HTTP/2 æ—¶ä»£çš„æ€§èƒ½æœ€ä½³å®è·µ](https://deliciousbrains.com/performance-best-practices-http2/)

- [ ] **éé˜»å¡ï¼š** ![high](https://img.shields.io/badge/-high-red) CSS æ–‡ä»¶éœ€è¦éé˜»å¡å¼•å…¥ï¼Œä»¥é˜²æ­¢ DOM èŠ±è´¹æ›´å¤šæ—¶é—´æ‰èƒ½æ¸²æŸ“å®Œæˆã€‚

  ```html
  <link
    rel="preload"
    href="global.min.css"
    as="style"
    onload="this.rel='stylesheet'"
  />
  <noscript><link rel="stylesheet" href="global.min.css"/></noscript>
  ```

  _ä¸ºä»€ä¹ˆï¼š_

  > CSS æ–‡ä»¶å¯ä»¥é˜»æ­¢é¡µé¢åŠ è½½å¹¶å»¶è¿Ÿé¡µé¢å‘ˆç°ã€‚ä½¿ç”¨`preload`å®é™…ä¸Šå¯ä»¥åœ¨æµè§ˆå™¨å¼€å§‹æ˜¾ç¤ºé¡µé¢å†…å®¹ä¹‹å‰åŠ è½½ CSS æ–‡ä»¶ã€‚

  _æ€ä¹ˆåšï¼š_

  > éœ€è¦æ·»åŠ `rel`å±æ€§å¹¶èµ‹å€¼`preload`ï¼Œå¹¶åœ¨`<link>`å…ƒç´ ä¸Šæ·»åŠ `as=â€œstyleâ€`ã€‚

  - ğŸ“– [loadCSS by filament group](https://github.com/filamentgroup/loadCSS)
  - ğŸ“– [ä½¿ç”¨ loadCSS é¢„åŠ è½½ CSS çš„ç¤ºä¾‹](https://gist.github.com/thedaviddias/c24763b82b9991e53928e66a0bafc9bf)
  - ğŸ“– [ä½¿ç”¨ rel =â€œpreloadâ€é¢„åŠ è½½å†…å®¹](https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content)
  - ğŸ“– [Preload: What Is It Good For? â€” Smashing Magazine](https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/)

- [ ] **CSS ç±»(class)çš„é•¿åº¦:** ![low](https://img.shields.io/badge/-low-green) class çš„é•¿åº¦ä¼šå¯¹ HTML å’Œ CSS æ–‡ä»¶äº§ç”Ÿï¼ˆè½»å¾®ï¼‰å½±å“ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ç”šè‡³æ€§èƒ½å½±å“ä¹Ÿæ˜¯æœ‰äº‰è®®çš„ï¼Œé¡¹ç›®çš„å‘½åç­–ç•¥ä¼šå¯¹æ ·å¼è¡¨çš„å¯ç»´æŠ¤æ€§æœ‰é‡å¤§å½±å“ã€‚å¦‚æœä½¿ç”¨ BEMï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå†™å‡ºæ¯”æ‰€éœ€è¦çš„ç±»åæ›´é•¿çš„å­—ç¬¦ã€‚é‡è¦çš„æ˜¯è¦æ˜æ™ºçš„é€‰æ‹©åå­—å’Œå‘½åç©ºé—´ã€‚

  _æ€ä¹ˆåšï¼š_

  > å¯èƒ½æœ‰äº›äººæ›´å…³æ³¨ç±»åçš„é•¿åº¦ï¼Œä½†æ˜¯ç½‘ç«™æŒ‰ç»„ä»¶è¿›è¡Œåˆ’åˆ†çš„è¯å¯ä»¥å¸®åŠ©å‡å°‘ç±»åçš„æ•°é‡å’Œé•¿åº¦ã€‚

  - ğŸ›  [long vs short class Â· jsPerf](https://jsperf.com/long-vs-short-class)

- [ ] **ä¸ç”¨çš„ CSS:** ![medium](https://img.shields.io/badge/-medium-orange) åˆ é™¤æœªä½¿ç”¨çš„ CSS é€‰æ‹©å™¨ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > åˆ é™¤æœªä½¿ç”¨çš„ CSS é€‰æ‹©å™¨å¯ä»¥å‡å°æ–‡ä»¶çš„å¤§å°ï¼Œæé«˜èµ„æºçš„åŠ è½½é€Ÿåº¦ã€‚

  _æ€ä¹ˆåšï¼š_

  > âš ï¸ æ£€æŸ¥è¦ä½¿ç”¨çš„ CSS æ¡†æ¶æ˜¯å¦å·²åŒ…å« reset/normalize ä»£ç ï¼Œå¯èƒ½ä¸éœ€è¦ç”¨åˆ° reset/normalize æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚

  - ğŸ›  [UnCSS Online](https://uncss-online.com/)
  - ğŸ›  [PurifyCSS](https://github.com/purifycss/purifycss)
  - ğŸ›  [PurgeCSS](https://github.com/FullHuman/purgecss)
  - ğŸ›  [Chrome DevTools Coverage](https://developers.google.com/web/updates/2017/04/devtools-release-notes#coverage)

* [ ] **å…³é”® CSSï¼ˆCriticalï¼‰:** ![high](https://img.shields.io/badge/-high-red) å°†é¡µé¢æ¸²æŸ“æ—¶å¿…å¤‡çš„ CSS é€šè¿‡`<style></style>`çš„æ–¹å¼å†…è”åˆ°é¡µé¢ä¸­ï¼ˆå°½å¯èƒ½å‹ç¼©åå¼•ç”¨ï¼‰ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > å†…è”å…³é”® CSS æœ‰åŠ©äºåŠ é€Ÿç½‘é¡µçš„å‘ˆç°ï¼Œå‡å°‘å¯¹æœåŠ¡å™¨çš„è¯·æ±‚æ•°é‡ã€‚

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨åœ¨çº¿å·¥å…·æˆ–ä½¿ç”¨ Addy Osmani å¼€å‘çš„æ’ä»¶ç”Ÿæˆå…³é”® CSSã€‚

  - ğŸ“– [ç†è§£å…³é”® CSS](https://www.smashingmagazine.com/2015/08/understanding-critical-css/)
  - ğŸ›  [Critical by Addy Osmani on GitHub](https://github.com/addyosmani/critical) automates this.
  - ğŸ“– [Inlining critical CSS for better web performance | Go Make Things](https://gomakethings.com/inlining-critical-css-for-better-web-performance/)
  - ğŸ“– [Critical Path CSS Generator - Prioritize above the fold content :: SiteLocity](https://www.sitelocity.com/critical-path-css-generator)
  - ğŸ“– [Reduce the size of the above-the-fold content](https://developers.google.com/speed/docs/insights/PrioritizeVisibleContent)

- [ ] **åµŒå…¥æˆ–å†…è” CSSï¼š** ![high](https://img.shields.io/badge/-high-red) é¿å…åœ¨`<body>`ä¸­ä½¿ç”¨åµŒå…¥æˆ–å†…è” CSS*ï¼ˆå¯¹ HTTP/2 æ— æ•ˆï¼‰*

  _ä¸ºä»€ä¹ˆï¼š_

  > å› ä¸ºå°†å†…å®¹ä¸è®¾è®¡åˆ†å¼€æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ã€‚å®ƒè¿˜å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å¹¶ä½¿ç«™ç‚¹å¯è®¿é—®æ€§æ›´å¼ºã€‚å¯¹äºæ€§èƒ½æ¥è¯´ï¼Œå®ƒåªæ˜¯å‡å°‘äº† HTML é¡µé¢çš„æ–‡ä»¶å¤§å°å’ŒåŠ è½½æ—¶é—´ã€‚

  _æ€ä¹ˆåšï¼š_

  > å§‹ç»ˆä½¿ç”¨å¤–éƒ¨æ ·å¼è¡¨æˆ–åœ¨`<head/>`ä¸­åµŒå…¥ CSSï¼ˆå¹¶éµå¾ªå…¶ä»– CSS æ€§èƒ½è§„åˆ™ï¼‰ã€‚

  - ğŸ“– [Observe CSS Best Practices: Avoid CSS Inline Styles](https://www.lifewire.com/avoid-inline-styles-for-css-3466846)

- [ ] **åˆ†ææ ·å¼è¡¨çš„å¤æ‚æ€§ï¼š** ![high](https://img.shields.io/badge/-high-red) åˆ†ææ ·å¼è¡¨æœ‰åŠ©äºå‘ç°æœ‰é—®é¢˜çš„ã€å†—ä½™å’Œé‡å¤çš„ CSS é€‰æ‹©å™¨ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > æœ‰æ—¶åœ¨ CSS ä¸­ä¼šå‡ºç°å†—ä½™æˆ–éªŒè¯é”™è¯¯ï¼Œåˆ†æ CSS æ–‡ä»¶å¹¶åˆ é™¤è¿™äº›å¤æ‚æ€§çš„ä»£ç å¯ä»¥åŠ é€Ÿ CSS æ–‡ä»¶çš„è¯»å–å’ŒåŠ è½½ï¼ˆå› ä¸ºæ‚¨çš„æµè§ˆå™¨ä¼šæ›´å¿«åœ°è¯»å–å®ƒä»¬ï¼‰

  _æ€ä¹ˆåšï¼š_

  > CSS éœ€è¦æœ‰ç¼–å†™è§„èŒƒï¼Œå†é€šè¿‡ CSS é¢„å¤„ç†å™¨å¤„ç†ã€‚ä¸‹é¢åˆ—å‡ºçš„ä¸€äº›åœ¨çº¿å·¥å…·ä¹Ÿå¯ä»¥å¸®åŠ©ä½ åˆ†æå’Œæ›´æ­£ä½ çš„ä»£ç ã€‚

  - ğŸ›  [TestMyCSS | ä¼˜åŒ–å’Œæ£€æŸ¥ CSS æ€§èƒ½](http://www.testmycss.com/)
  - ğŸ“– [CSS ç»Ÿè®¡æ•°æ®ï¼ˆstatsï¼‰](https://cssstats.com/)
  - ğŸ›  [macbre/analyze-css: CSS é€‰æ‹©å™¨å¤æ‚æ€§å’Œæ€§èƒ½åˆ†æ](https://github.com/macbre/analyze-css)
  - ğŸ›  [Project Wallace](https://www.projectwallace.com/) is like CSS Stats but stores stats over time so you can track your changes

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

### å­—ä½“

![fonts](/fonts.png)

- ğŸ“– [A Book Apart, Webfont Handbook](https://abookapart.com/products/webfont-handbook)

* [ ] **Webfont æ ¼å¼ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) åœ¨ä½ çš„ç½‘ç«™æˆ–è€…åº”ç”¨ä½¿ç”¨ WOFF2 æ ¼å¼å­—ä½“ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > æ ¹æ® Google çš„è¯´æ³•ï¼ŒWOFF 2.0 Web å­—ä½“å‹ç¼©æ ¼å¼å¹³å‡æ¯” WOFF 1.0 é«˜ 30ï¼…çš„å¢ç›Šã€‚ä¸€ä¸ªè¾ƒå¥½çš„åšæ³•æ˜¯ä½¿ç”¨ WOFF 2.0 ä½œä¸ºä¸»è¦å­—ä½“ï¼ŒWOFF 1.0 å’Œ TTF æ ¼å¼å­—ä½“ä½œä¸ºå¤‡é€‰ã€‚

  _æ€ä¹ˆåšï¼š_

  > åœ¨è´­ä¹°æ–°å­—ä½“ä¹‹å‰åº”å…ˆæ£€æŸ¥æä¾›å•†æ˜¯å¦æä¾›äº† WOFF2 æ ¼å¼ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯å…è´¹å­—ä½“ï¼Œåˆ™å¯ä»¥å§‹ç»ˆä½¿ç”¨ Font Squirrel ç”Ÿæˆæ‰€éœ€æ ¼å¼çš„å­—ä½“ã€‚

  - ğŸ“– [WOFF 2.0 â€“ äº†è§£æœ‰å…³ä¸‹ä¸€ä»£ Web å­—ä½“æ ¼å¼çš„æ›´å¤šä¿¡æ¯ï¼Œå¹¶å°† TTF è½¬æ¢ä¸º WOFF2](https://gist.github.com/sergejmueller/cf6b4f2133bcb3e2f64a)
  - ğŸ›  [åˆ›å»ºä½ è‡ªå·±çš„@ font-face Kits Â» Font Squirrel](https://www.fontsquirrel.com/tools/webfont-generator)
  - ğŸ›  [IcoMoon App - Icon Font, SVG, PDF & PNG Generator](https://icomoon.io/app/)
  - ğŸ“– [Using @font-face | CSS-Tricks](https://css-tricks.com/snippets/css/using-font-face/?ref=frontendchecklist)
  - ğŸ“– [Can I use... WOFF2](https://caniuse.com/#feat=woff2)

* [ ] **ä½¿ç”¨`preconnect`å¯ä»¥æ›´å¿«åœ°åŠ è½½å­—ä½“ï¼š** ![medium](https://img.shields.io/badge/-medium-orange)

  ```html
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  ```

  _ä¸ºä»€ä¹ˆï¼š_

  > å½“ä½ æµè§ˆç½‘ç«™æ—¶ï¼Œè®¾å¤‡éœ€è¦è·å–ç½‘ç«™æ‰€åœ¨çš„ä½ç½®ä»¥åŠéœ€è¦è¿æ¥çš„æœåŠ¡å™¨ã€‚æµè§ˆå™¨å¿…é¡»è¿æ¥ DNS æœåŠ¡å™¨å¹¶ç­‰å¾…æŸ¥æ‰¾å®Œæˆåå†è·å–èµ„æºï¼ˆå­—ä½“ï¼ŒCSS æ–‡ä»¶...ï¼‰ï¼Œ`prefetche`å’Œ`preconnect`å…è®¸æµè§ˆå™¨åœ¨ç©ºé—²æ—¶è¿›è¡Œä¸Šé¢çš„æ“ä½œï¼Œåœ¨çœŸå®è¯·æ±‚æ—¶å°±ä¸éœ€è¦å†èŠ±æ—¶é—´å»åšä¸€ç³»åˆ—åŠ¨ä½œã€‚è¿™å¸¦æ¥äº†æ€§èƒ½çš„æå‡ï¼Œå› ä¸ºå½“æµè§ˆå™¨ä½¿ç”¨å­—ä½“ä¿¡æ¯è§£æ css æ–‡ä»¶å¹¶åˆ‡ä»æœåŠ¡å™¨è¯·æ±‚å­—ä½“æ–‡ä»¶æ—¶ï¼Œå®ƒå·²ç»é¢„å…ˆè§£æäº† DNS ä¿¡æ¯å¹¶ä¸”åœ¨å…¶è¿æ¥æ± ä¸­å‡†å¤‡å¥½ä¸æœåŠ¡å™¨çš„å¼€æ”¾è¿æ¥ã€‚

  _æ€ä¹ˆåšï¼š_

  > åœ¨é¢„å–æ‚¨çš„ç½‘ç»œå­—ä½“ä¹‹å‰ï¼Œè¯·ä½¿ç”¨ç½‘é¡µæµ‹è¯•æ¥æ£€æµ‹ç½‘ç«™.
  > æŸ¥æ‰¾è“ç»¿è‰² DNS æŸ¥æ‰¾å¹¶è®°ä¸‹æ­£åœ¨è¯·æ±‚çš„ä¸»æœºï¼ˆLook for teal colored DNS lookups and note the host that are being requested.ï¼‰
  > åœ¨`<head/>`ä¸­æ·»åŠ é¢„å–çš„ webfontsï¼Œæ·»åŠ ä¸Šä¸€æ­¥æŸ¥æ‰¾åˆ°çš„ä¸»æœºåã€‚

  - ğŸ“– [Faster Google Fonts with Preconnect - CDN Planet](https://www.cdnplanet.com/blog/faster-google-webfonts-preconnect/)
  - ğŸ“– [Make Your Site Faster with Preconnect Hints | Viget](https://www.viget.com/articles/make-your-site-faster-with-preconnect-hints/)
  - ğŸ“– [Ultimate Guide to Browser Hints: Preload, Prefetch, and Preconnect - MachMetrics Speed Blog](https://www.machmetrics.com/speed-blog/guide-to-browser-hints-preload-preconnect-prefetch/)
  - ğŸ“– [A Comprehensive Guide to Font Loading Strategiesâ€”zachleat.com](https://www.zachleat.com/web/comprehensive-webfonts/#font-face)
  - ğŸ›  [typekit/webfontloader: Web Font Loader gives you added control when using linked fonts via @font-face.](https://github.com/typekit/webfontloader)

* [ ] **Webfont å¤§å°ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) Webfont å°ºå¯¸ä¸è¶…è¿‡ 300kbï¼ˆåŒ…æ‹¬æ‰€æœ‰å˜ä½“ï¼‰

- ğŸ“– [Font Bytes - Page Weight](https://httparchive.org/reports/page-weight#bytesFont)

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

### å›¾ç‰‡

![images](/images.png)

- ğŸ“– [Image Bytes in 2018](https://httparchive.org/reports/page-weight#bytesImg)

- [ ] **å›¾åƒä¼˜åŒ–:** ![high](https://img.shields.io/badge/-high-red) åœ¨ä¿è¯å‹ç¼©åçš„å›¾ç‰‡ç¬¦åˆäº§å“è¦æ±‚çš„æƒ…å†µä¸‹å°†å›¾åƒè¿›è¡Œä¼˜åŒ–ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ä¼˜åŒ–çš„å›¾åƒåœ¨æµè§ˆå™¨ä¸­åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œæ¶ˆè€—çš„æ•°æ®æ›´å°‘ã€‚

  _æ€ä¹ˆåšï¼š_

  > å°½å¯èƒ½å°è¯•ä½¿ç”¨ CSS3 æ•ˆæœï¼ˆè€Œä¸æ˜¯ç”¨å°å›¾åƒæ›¿ä»£ï¼‰
  > å°½å¯èƒ½ä½¿ç”¨å­—ä½“å›¾ç‰‡
  > ä½¿ç”¨ SVG
  > ä½¿ç”¨ç¼–è¯‘å·¥å…·å¹¶æŒ‡å®š 85 ä»¥ä¸‹çš„çº§åˆ«å‹ç¼©ã€‚

  - ğŸ“– [Image Optimization | Web Fundamentals | Google Developers](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization)
  - ğŸ“– [Essential Image Optimization - An eBook by Addy Osmani](https://images.guide/)
  - ğŸ›  [TinyJPG â€“ Compress JPEG images intelligently](https://tinyjpg.com/)
  - ğŸ›  [Kraken.io - Online Image Optimizer](https://kraken.io/web-interface)
  - ğŸ›  [Compressor.io - optimize and compress JPEG photos and PNG images](https://compressor.io/compress)
  - ğŸ›  [Cloudinary - Image Analysis Tool](https://webspeedtest.cloudinary.com)
  - ğŸ›  [SVGOMG - Optimize SVG vector graphics files](https://jakearchibald.github.io/svgomg/)

* [ ] **å›¾åƒæ ¼å¼ï¼š** ![high](https://img.shields.io/badge/-high-red) é€‚å½“é€‰æ‹©å›¾åƒæ ¼å¼ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ç¡®ä¿å›¾ç‰‡ä¸ä¼šå‡æ…¢ç½‘ç«™é€Ÿåº¦

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨[Lighthouse](https://developers.google.com/web/tools/lighthouse/)è¯†åˆ«å“ªäº›å›¾åƒå¯ä»¥ä½¿ç”¨ä¸‹ä¸€ä»£å›¾ç‰‡æ ¼å¼ï¼ˆå¦‚ JPEG 2000m JPEG XR æˆ– WebPï¼‰ã€‚
  > æ¯”è¾ƒä¸åŒçš„æ ¼å¼ï¼Œæœ‰æ—¶ä½¿ç”¨ PNG8 æ¯” PNG16 å¥½ï¼Œæœ‰æ—¶å€™ä¸æ˜¯ã€‚

  - ğŸ“– [Serve Images in Next-Gen Formats Â |Â  Tools for Web Developers Â |Â  Google Developers](https://developers.google.com/web/tools/lighthouse/audits/webp)
  - ğŸ“– [What Is the Right Image Format for Your Website? â€” SitePoint](https://www.sitepoint.com/what-is-the-right-image-format-for-your-website/)
  - ğŸ“– [PNG8 - The Clear Winner â€” SitePoint](https://www.sitepoint.com/png8-the-clear-winner/)
  - ğŸ“– [8-bit vs 16-bit - What Color Depth You Should Use And Why It Matters - DIY Photography](https://www.diyphotography.net/8-bit-vs-16-bit-color-depth-use-matters/)

- [ ] **ä½¿ç”¨çŸ¢é‡å›¾åƒ VS æ …æ ¼/ä½å›¾ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) å¯ä»¥çš„è¯ï¼Œæ¨èä½¿ç”¨çŸ¢é‡å›¾åƒè€Œä¸æ˜¯ä½å›¾å›¾åƒã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > çŸ¢é‡å›¾åƒï¼ˆSVGï¼‰å¾€å¾€æ¯”å›¾åƒå°ï¼Œå…·æœ‰å“åº”æ€§å’Œå®Œç¾ç¼©æ”¾åŠŸèƒ½ã€‚è€Œä¸”è¿™äº›å›¾åƒå¯ä»¥é€šè¿‡ CSS è¿›è¡ŒåŠ¨ç”»å’Œä¿®æ”¹æ“ä½œã€‚

* [ ] **å›¾åƒå°ºå¯¸ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) å¦‚æœå·²çŸ¥æœ€ç»ˆæ¸²æŸ“å›¾åƒå¤§å°ï¼Œè¯·åœ¨<img>ä¸Šè®¾ç½®å®½åº¦å’Œé«˜åº¦å±æ€§ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > å¦‚æœè®¾ç½®äº†é«˜åº¦å’Œå®½åº¦ï¼Œåˆ™åœ¨åŠ è½½é¡µé¢æ—¶ä¼šä¿ç•™å›¾åƒæ‰€éœ€çš„ç©ºé—´ã€‚å¦‚æœæ²¡æœ‰è¿™äº›å±æ€§ï¼Œæµè§ˆå™¨å°±ä¸çŸ¥é“å›¾åƒçš„å¤§å°ï¼Œä¹Ÿæ— æ³•ä¸ºå…¶ä¿ç•™é€‚å½“çš„ç©ºé—´ï¼Œå¯¼è‡´é¡µé¢å¸ƒå±€åœ¨åŠ è½½æœŸé—´å‘ç”Ÿå˜åŒ–ã€‚

* [ ] **é¿å…ä½¿ç”¨ Base64 å›¾åƒï¼š** ![medium](https://img.shields.io/badge/-medium-orange) ä½ å¯ä»¥å°†å¾®å°å›¾åƒè½¬æ¢ä¸º base64ï¼Œä½†å®é™…ä¸Šå¹¶ä¸æ˜¯æœ€ä½³å®è·µã€‚

  - ğŸ“– [Base64 Encoding & Performance, Part 1 and 2 by Harry Roberts](https://csswizardry.com/2017/02/base64-encoding-and-performance/)
  - ğŸ“– [A closer look at Base64 image performance â€“ The Page Not Found Blog](http://www.andygup.net/a-closer-look-at-base64-image-performance/)
  - ğŸ“– [When to base64 encode images (and when not to) | David Calhoun](https://www.davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to/)
  - ğŸ“– [Base64 encoding images for faster pages | Performance and seo factors](https://varvy.com/pagespeed/base64-images.html)

* [ ] **æ‡’åŠ è½½ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) å›¾åƒæ‡’åŠ è½½ï¼ˆå§‹ç»ˆæä¾› noscript ä½œä¸ºåå¤‡æ–¹æ¡ˆï¼‰ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > å®ƒèƒ½æ”¹å–„å½“å‰é¡µé¢çš„å“åº”æ—¶é—´ï¼Œé¿å…åŠ è½½ä¸€äº›ç”¨æˆ·å¯èƒ½ä¸éœ€è¦æˆ–ä¸å¿…è¦çš„å›¾åƒã€‚

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨[Lighthouse](https://developers.google.com/web/tools/lighthouse/)å¯ä»¥è¯†åˆ«å½“å‰å±å¹•å¤–çš„å›¾åƒæ•°é‡ã€‚
  > è¦ç¡®ä¿å›¾ç‰‡æ‡’åŠ è½½æ—¶é¼ æ ‡æ‚¬åœæˆ–å…¶ä»–ç”¨æˆ·æ“ä½œæ—¶æ˜¾ç¤ºçš„æ›¿ä»£å›¾åƒã€‚
  > å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å›¾åƒæ‡’åŠ è½½çš„ JavaScript æ’ä»¶ã€‚

  - ğŸ›  [verlok/lazyload: Github](https://github.com/verlok/lazyload)
  - ğŸ“– [Lazy Loading Images and Video Â |Â  Web Fundamentals Â |Â  Google Developers](https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video/)
  - ğŸ“– [5 Brilliant Ways to Lazy Load Images For Faster Page Loads - Dynamic Drive Blog](http://blog.dynamicdrive.com/5-brilliant-ways-to-lazy-load-images-for-faster-page-loads/)

* [ ] **å“åº”å¼å›¾åƒï¼š** ![medium](https://img.shields.io/badge/-medium-orange) ç¡®ä¿æä¾›æ¥è¿‘è®¾å¤‡æ˜¾ç¤ºå°ºå¯¸çš„å›¾åƒã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > å°å‹è®¾å¤‡ä¸éœ€è¦æ¯”è§†å£å¤§çš„å›¾åƒã€‚å»ºè®®åœ¨ä¸åŒå°ºå¯¸ä¸Šä½¿ç”¨ä¸€ä¸ªå›¾åƒçš„å¤šä¸ªç‰ˆæœ¬ã€‚

  _æ€ä¹ˆåšï¼š_

  > ä¸ºä¸åŒçš„è®¾å¤‡è®¾ç½®ä¸åŒå¤§å°çš„å›¾åƒã€‚
  > ä½¿ç”¨ srcset å’Œ picture ä¸ºæ¯ä¸ªå›¾åƒæä¾›å¤šç§å˜ä½“ï¼ˆvariantsï¼‰ã€‚

  - ğŸ“– [Responsive images - Learn web development | MDN](https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images)

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

### JavaScript

![javascript](/javascript.png)

- [ ] **JS å‹ç¼©:** ![high](https://img.shields.io/badge/-high-red) æ‰€æœ‰ JavaScript æ–‡ä»¶éƒ½è¦è¢«å‹ç¼©ï¼Œç”Ÿäº§ç¯å¢ƒä¸­åˆ é™¤æ³¨é‡Šã€ç©ºæ ¼å’Œç©ºè¡Œï¼ˆåœ¨ HTTP/2 ä»ç„¶æœ‰æ•ˆæœï¼‰ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > åˆ é™¤æ‰€æœ‰ä¸å¿…è¦çš„ç©ºæ ¼ã€æ³¨é‡Šå’Œç©ºè¡Œå°†å‡å°‘ JavaScript æ–‡ä»¶çš„å¤§å°ï¼Œå¹¶åŠ å¿«ç½‘ç«™çš„é¡µé¢åŠ è½½æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

  _æ€ä¹ˆåšï¼š_

  > å»ºè®®ä½¿ç”¨ä¸‹é¢çš„å·¥å…·åœ¨æ„å»ºæˆ–éƒ¨ç½²ä¹‹å‰è‡ªåŠ¨ç¼©å°æ–‡ä»¶ã€‚

  - ğŸ“– [uglify-js - npm](https://www.npmjs.com/package/uglify-js)
  - ğŸ›  [Online JavaScript Compressor](http://refresh-sf.com)
  - ğŸ“– [Short read: How is HTTP/2 different? Should we still minify and concatenate?](https://scaleyourcode.com/blog/article/28)

* [ ] **ä¸å†…åµŒ JavaScript:** ![medium](https://img.shields.io/badge/-medium-orange) _(ä»…å¯¹ç½‘ç«™æœ‰æ•ˆ)_ é¿å…åœ¨`body`ä¸­é—´åµŒå…¥å¤šä¸ª JavaScript ä»£ç ï¼Œå°† JavaScript ä»£ç é‡æ–°é›†ä¸­åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œæ”¾åœ¨`<head>`æˆ–é¡µé¢æœ«å°¾ï¼ˆ`</body>`ä¹‹å‰ï¼‰ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > å°† JavaScript åµŒå…¥ä»£ç ç›´æ¥æ”¾åœ¨`<body>`ä¸­å¯èƒ½ä¼šé™ä½é¡µé¢é€Ÿåº¦ï¼Œå› ä¸ºå®ƒåœ¨æ„å»º DOM æ—¶ä¼šåŠ è½½ã€‚æœ€å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨`async` æˆ– `defer`çš„å¤–éƒ¨æ–‡ä»¶æ¥é¿å…é˜»å¡ DOM æ¸²æŸ“ã€‚å¦ä¸€ç§é€‰æ‹©æ˜¯åœ¨`<head>`ä¸­æ”¾ç½®ä¸€äº›è„šæœ¬ã€‚å¤§å¤šæ•°æ—¶å€™æ˜¯éœ€è¦åœ¨ DOM è¿›å…¥ä¸»å¤„ç†ä¹‹å‰åŠ è½½çš„åˆ†æä»£ç æˆ–å°è„šæœ¬ã€‚

  _æ€ä¹ˆåšï¼š_

  > ç¡®ä¿ä½¿ç”¨ async æˆ– defer åŠ è½½æ‰€æœ‰ script æ–‡ä»¶ï¼Œå¹¶å‡†ç¡®åœ°åœ¨`<head>`ä¸­åŠ è½½ä»£ç ã€‚

  - ğŸ“– [ä¼˜åŒ– JavaScript å¹¶æé«˜ç½‘ç«™åŠ è½½é€Ÿåº¦çš„ 11 ä¸ªæŠ€å·§](https://www.upwork.com/hiring/development/11-tips-to-optimize-javascript-and-improve-website-loading-speeds/)

* [ ] **éé˜»å¡ JavaScriptï¼š** ![high](https://img.shields.io/badge/-high-red) ä½¿ç”¨ defer å±æ€§æˆ–ä½¿ç”¨ async æ¥å¼‚æ­¥åŠ è½½ JavaScript æ–‡ä»¶ã€‚

  ```html
  <!-- Defer Attribute -->
  <script defer src="foo.js">

  <!-- Async Attribute -->
  <script async src="foo.js">
  ```

  _ä¸ºä»€ä¹ˆï¼š_

  > JavaScript é˜»æ­¢ HTML æ–‡æ¡£çš„æ­£å¸¸è§£æï¼Œå› æ­¤å½“è§£æå™¨åˆ°è¾¾`<script>`æ ‡è®°æ—¶ï¼ˆç‰¹åˆ«æ˜¯åœ¨`<head>`å†…ï¼‰ï¼Œå®ƒä¼šåœæ­¢è§£æå¹¶ä¸”æ‰§è¡Œè„šæœ¬ã€‚å¦‚æœæ‚¨çš„è„šæœ¬ä½äºé¡µé¢é¡¶éƒ¨ï¼Œåˆ™å¼ºçƒˆå»ºè®®æ·»åŠ `async`å’Œ`defer`ï¼Œä½†å¦‚æœåœ¨`</body>`æ ‡è®°ä¹‹å‰åŠ è½½ï¼Œæ²¡æœ‰å¤ªå¤§å½±å“ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨è¿™äº›å±æ€§æ¥é¿å…æ€§èƒ½é—®é¢˜æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ã€‚

  _æ€ä¹ˆåšï¼š_

  > æ·»åŠ `async`ï¼ˆå¦‚æœè„šæœ¬ä¸ä¾èµ–äºå…¶ä»–è„šæœ¬ï¼‰æˆ–`defer`ï¼ˆå¦‚æœè„šæœ¬ä¾èµ–æˆ–ä¾èµ–äºå¼‚æ­¥è„šæœ¬ï¼‰ä½œä¸º script è„šæœ¬æ ‡è®°çš„å±æ€§ã€‚
  > å¦‚æœæœ‰å°è„šæœ¬ï¼Œå¯ä»¥åœ¨å¼‚æ­¥è„šæœ¬ä¸Šæ–¹ä½¿ç”¨å†…è”è„šæœ¬ã€‚

  - ğŸ“– [Remove Render-Blocking JavaScript](https://developers.google.com/speed/docs/insights/BlockingJS)
  - ğŸ“– [Defer loading JavaScript](https://varvy.com/pagespeed/defer-loading-javascript.html)

* [ ] **ä¼˜åŒ–å’Œæ›´æ–°çš„ JS åº“ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) é¡¹ç›®ä¸­ä½¿ç”¨çš„æ‰€æœ‰ JavaScript åº“éƒ½æ˜¯æœ‰ç”¨åˆ°çš„ (æ¨èä½¿ç”¨åŸç”Ÿ JS çš„ç®€å•åŠŸèƒ½)å¹¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

  _ä¸ºä»€ä¹ˆï¼š_

  > å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ–°ç‰ˆæœ¬éƒ½å¸¦æœ‰ä¼˜åŒ–å’Œå®‰å…¨æ€§ä¿®å¤ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨æœ€ä¼˜åŒ–çš„ä»£ç æ¥ä¼˜åŒ–é¡¹ç›®ã€‚ç¡®ä¿ä¸å­˜åœ¨è¿‡æ—¶æ’ä»¶ã€‚

  _æ€ä¹ˆåšï¼š_

  > å¦‚æœé¡¹ç›®ä½¿ç”¨ NPM ç®¡ç†ä¾èµ–åŒ…ï¼Œ[npm-check](https://www.npmjs.com/package/npm-check)æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åº“æ¥å‡çº§/æ›´æ–°ä½ çš„åº“ã€‚

  - ğŸ“– [You may not need jQuery](http://youmightnotneedjquery.com/)
  - ğŸ“– [Vanilla JavaScript for building powerful web applications](https://plainjs.com/)

- [ ] **æ£€æŸ¥ä¾èµ–é¡¹å¤§å°é™åˆ¶ï¼š** ![low](https://img.shields.io/badge/-low-green) ç¡®ä¿ä½¿ç”¨æœ€ä¼˜çš„å¤–éƒ¨åº“ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ›´è½»çš„åº“æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ä½ å¯èƒ½æƒ³ä½¿ç”¨ npm ä¸­ 745 000 ä¸ªåŒ…ä¸­çš„ä¸€ä¸ªï¼Œä½†ä½ éœ€è¦é€‰æ‹©æœ€é€‚åˆé¡¹ç›®éœ€æ±‚çš„åŒ…ã€‚ä¾‹å¦‚ï¼ŒMomentJS æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„åº“ï¼Œä½†æ˜¯ä½ å¯èƒ½æ°¸è¿œä¸ä¼šä½¿ç”¨å…¶ä¸­çš„å¾ˆå¤šæ–¹æ³•ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåˆ›å»º Day.js çš„åŸå› ã€‚ç¬é—´å¤§å°ä» 16.4kB åˆ° 2kBã€‚


    *æ€ä¹ˆåšï¼š*
    > å§‹ç»ˆæ¯”è¾ƒå¹¶é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„è½»å‹åº“ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨[npm trends](http://www.npmtrends.com/)ç­‰å·¥å…·æ¥æ¯”è¾ƒNPMåŒ…ä¸‹è½½æ¬¡æ•°æˆ–[Bundlephobia](https://bundlephobia.com/)ä»¥äº†è§£ä¾èµ–é¡¹çš„å¤§å°ã€‚

    * ğŸ›  [ai/size-limit: Prevent JS libraries bloat. If you accidentally add a massive dependency, Size Limit will throw an error.](https://github.com/ai/size-limit)
    * ğŸ“– [webpack-bundle-analyzer - npm](https://www.npmjs.com/package/webpack-bundle-analyzer)
    * ğŸ“– [Size Limit: Make the Web lighter â€” Martian Chronicles, Evil Martiansâ€™ team blog](https://evilmartians.com/chronicles/size-limit-make-the-web-lighter)

- [ ] **JavaScript åˆ†æ:** ![medium](https://img.shields.io/badge/-medium-orange) æ£€æŸ¥ JavaScript æ–‡ä»¶ï¼ˆä»¥åŠ CSSï¼‰ä¸­çš„æ€§èƒ½é—®é¢˜ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > JavaScript å¤æ‚æ€§å¯èƒ½ä¼šé™ä½è¿è¡Œæ—¶æ€§èƒ½ã€‚è¯†åˆ«è¿™äº›å¯èƒ½çš„é—®é¢˜å¯¹æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒæ¥è¯´è‡³å…³é‡è¦ã€‚

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨ Chrome å¼€å‘è€…å·¥å…·ä¸­çš„æ—¶é—´è½´å·¥å…·æ¥è¯„ä¼°è„šæœ¬äº‹ä»¶ï¼Œå¹¶æ‰¾åˆ°å¯èƒ½éœ€è¦èŠ±è´¹å¤ªå¤šæ—¶é—´çš„äº‹ä»¶ã€‚

  - ğŸ“– [Speed Up JavaScript Execution Â |Â  Tools for Web Developers Â |Â  Google Developers](https://developers.google.com/web/tools/chrome-devtools/rendering-tools/js-execution)
  - ğŸ“– [JavaScript Profiling With The Chrome Developer Tools â€” Smashing Magazine](https://www.smashingmagazine.com/2012/06/javascript-profiling-chrome-developer-tools/)
  - ğŸ“– [How to Record Heap Snapshots Â |Â  Tools for Web Developers Â |Â  Google Developers](https://developers.google.com/web/tools/chrome-devtools/memory-problems/heap-snapshots)
  - ğŸ“– [Chapter 22 - Profiling the Frontend - Blackfire](https://blackfire.io/docs/book/22-frontend-profiling)
  - ğŸ“– [30 Tips To Improve Javascript Performance](http://www.monitis.com/blog/30-tips-to-improve-javascript-performance/)

* [ ] **Use of Service Workers:** ![medium](https://img.shields.io/badge/-medium-orange) You are using Service Workers in your PWA to cache datas or execute possible heavy tasks without impacting the user experience of your application.
  - ğŸ“– [Service Workers: an Introduction Â |Â  Web Fundamentals Â |Â  Google Developers](https://developers.google.com/web/fundamentals/primers/service-workers/)
  - ğŸ“– [Measuring the Real-world Performance Impact of Service Workers Â |Â  Web Â |Â  Google Developers](https://developers.google.com/web/showcase/2016/service-worker-perf)
  - ğŸ“– [What Are Service Workers and How They Help Improve Performance](https://www.keycdn.com/blog/service-workers/)
  - ğŸ“– [How does a service worker work? - YouTube](https://www.youtube.com/watch?v=__xAtWgfzvc)

- [ ] **ä½¿ç”¨ tree shaking æŠ€æœ¯å‡å°‘ js å¤§å°:** ![high](https://img.shields.io/badge/-high-red) é€šè¿‡æ„å»ºå·¥å…·åˆ†æ JavaScript ä»£ç å¹¶ç§»é™¤ç”Ÿäº§ç¯å¢ƒä¸­ç”¨ä¸åˆ°çš„ js æ¨¡å—æˆ–æ–¹æ³•

      * ğŸ“– [

  Reduce JavaScript Payloads with Tree Shaking](https://developers.google.com/web/fundamentals/performance/optimizing-javascript/tree-shaking/)

- [ ] **ä½¿ç”¨ code splitting åˆ†åŒ…åŠ è½½ js:** ![high](https://img.shields.io/badge/-high-red) é€šè¿‡åˆ†åŒ…åŠ è½½ï¼Œå‡å°‘é¦–æ¬¡åŠ è½½æ‰€éœ€æ—¶é—´

  _æ€ä¹ˆåšï¼š_

  > - **Vendor splitting** æ ¹æ®åº“æ–‡ä»¶æ‹†åˆ†æ¨¡å—ï¼Œä¾‹å¦‚ React æˆ– lodash å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶
  > - **Entry point splitting** æ ¹æ®å…¥å£æ‹†åˆ†æ¨¡å—ï¼Œä¾‹å¦‚é€šè¿‡å¤šé¡µåº”ç”¨å…¥å£æˆ–è€…å•é¡µåº”ç”¨è·¯ç”±è¿›è¡Œæ‹†åˆ†
  > - **Dynamic splitting** æ ¹æ®åŠ¨æ€åŠ è½½æ‹†åˆ†æ¨¡å—ï¼Œä½¿ç”¨åŠ¨æ€åŠ è½½è¯­æ³• `import()` ï¼Œå®ç°æ¨¡å—æŒ‰éœ€åŠ è½½

  - ğŸ“– [Reduce JavaScript Payloads with Tree Shaking](https://developers.google.com/web/fundamentals/performance/optimizing-javascript/code-splitting/)

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

### Server

![server-side](/server-side.png)

- [ ] **ç½‘ç«™ä½¿ç”¨ HTTPS:** ![high](https://img.shields.io/badge/-high-red)

  _Why:_

  > HTTPS ä¸ä»…é€‚ç”¨äºç”µå­å•†åŠ¡ç½‘ç«™ï¼Œä¹Ÿé€‚ç”¨äºæ‰€æœ‰å­˜åœ¨æ•°æ®ä¼ é€’çš„ç½‘ç«™ã€‚å¦‚ä»Šçš„ç°ä»£æµè§ˆå™¨å¯¹äºä¸å®‰å…¨çš„ç½‘ç«™åœ¨è®¸å¤šåŠŸèƒ½ä¸Šåšäº†äº›é™åˆ¶ã€‚ ä¾‹å¦‚ï¼šå¦‚æœç½‘ç«™æœªä½¿ç”¨ HTTPSï¼Œåˆ™åœ°ç†å®šä½ï¼Œæ¨é€é€šçŸ¥å’ŒæœåŠ¡å·¥ä½œç¨‹åºç­‰åŠŸèƒ½ä¼šä¸èµ·ä½œç”¨ã€‚ä»Šå¤©è®¾ç½®å’Œä½¿ç”¨ SSL è¯ä¹¦æ¯”ä»¥å‰å®¹æ˜“å¾—å¤š([Let's Encrypt](https://letsencrypt.org/)èƒ½æä¾›å…è´¹çš„ https æœåŠ¡).

  - ğŸ“– [Why Use HTTPS? | Cloudflare](https://www.cloudflare.com/learning/security/why-use-https/)
  - ğŸ“– [Enabling HTTPS Without Sacrificing Your Web Performance - Moz](https://moz.com/blog/enabling-https-without-sacrificing-web-performance)
  - ğŸ“– [How HTTPS Affects Website Performance](https://wp-rocket.me/blog/https-affects-website-performance/)
  - ğŸ“– [HTTP versus HTTPS versus HTTP2 - The real story | Tune The Web](https://www.tunetheweb.com/blog/http-versus-https-versus-http2/)
  - ğŸ“– [HTTP vs HTTPS â€” Test them both yourself](https://www.httpvshttps.com/)

- [ ] **é¡µé¢å¤§å° < 1500 KB(ç†æƒ³ < 500 KB):** ![high](https://img.shields.io/badge/-high-red) (ç†æƒ³æƒ…å†µ < 500 KB) å°½å¯èƒ½å‡å°‘é¡µé¢å’Œèµ„æºçš„å¤§å°ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”è¯¥å°è¯•è®©é¡µé¢å¤§å°<500 KBï¼Œä½† Web é¡µé¢å¤§å°ä¸­ä½æ•°å¤§çº¦ä¸º 1500 KBï¼ˆå³ä½¿åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼‰ã€‚æ ¹æ®ä½ çš„ç›®æ ‡ç”¨æˆ·ã€è¿æ¥é€Ÿåº¦ã€è®¾å¤‡ï¼Œå°½å¯èƒ½å‡å°‘é¡µé¢å¤§å°ä»¥å°½å¯èƒ½è·å¾—æœ€ä½³ç”¨æˆ·ä½“éªŒéå¸¸é‡è¦ã€‚

  _æ€ä¹ˆåšï¼š_

  > å‰ç«¯æ€§èƒ½æ¸…å•ä¸­çš„æ‰€æœ‰è§„åˆ™å°†å¸®åŠ©ä½ å°½å¯èƒ½åœ°å‡å°‘èµ„æºå’Œä»£ç ã€‚

  - ğŸ“– [Page Weight](https://httparchive.org/reports/page-weight#bytesTotal)
  - ğŸ›  [What Does My Site Cost?](https://whatdoesmysitecost.com/)

- [ ] **é¡µé¢åŠ è½½æ—¶é—´ < 3 ç§’ï¼š** ![high](https://img.shields.io/badge/-high-red) å°½å¯èƒ½å‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œä»¥ä¾¿å¿«é€Ÿå°†å†…å®¹ä¼ é€’ç»™ç”¨æˆ·ã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºé€Ÿåº¦è¶Šå¿«ï¼Œåå¼¹å¢åŠ çš„å¯èƒ½æ€§è¶Šå°ï¼Œæ¢å¥è¯è¯´ï¼Œå¤±å»ç”¨æˆ·æˆ–æœªæ¥å®¢æˆ·çš„æœºä¼šå°±è¶Šå°‘ã€‚Google å¯¹è¯¥ä¸»é¢˜çš„å……åˆ†ç ”ç©¶è¯æ˜äº†è¿™ä¸€ç‚¹ã€‚

  _æ€ä¹ˆåšï¼š_

  > ä½¿ç”¨[Page Speed Insight](https://developers.google.com/speed/pagespeed/insights/)æˆ–[WebPageTest](https://www.webpagetest.org/)ç­‰åœ¨çº¿å·¥å…·åˆ†æå¯èƒ½ä¼šé™ä½é€Ÿåº¦çš„å·¥å…·ï¼Œå¹¶ä½¿ç”¨å‰ç«¯æ€§èƒ½æ¸…å•æ¥ç¼©çŸ­åŠ è½½æ—¶é—´ã€‚

  - ğŸ›  [Compare your mobile site speed](https://www.thinkwithgoogle.com/feature/mobile/)
  - ğŸ›  [Test Your Mobile Website Speed and Performance - Think With Google](https://testmysite.thinkwithgoogle.com/?_ga=1.155316027.1489996091.1482187369)
  - ğŸ“– [Average Page Load Times for 2018 - How does yours compare? - MachMetrics Speed Blog](https://www.machmetrics.com/speed-blog/average-page-load-times-websites-2018/)

- [ ] **TTFB < 1.3 seconds:** ![high](https://img.shields.io/badge/-high-red) å°½å¯èƒ½å‡å°‘æµè§ˆå™¨åœ¨æ¥æ”¶æ•°æ®ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ã€‚

  - ğŸ“– [ä»€ä¹ˆæ˜¯ DevTools ä¸­çš„ TTFBï¼Œä»¥åŠå¦‚ä½•å¤„ç†å®ƒ](https://scaleyourcode.com/blog/article/27)
  - ğŸ“– [Monitoring your servers with free tools is easy](https://scaleyourcode.com/blog/article/7)
  - ğŸ“– [Time to First Byte (TTFB)](https://varvy.com/pagespeed/ttfb.html)
  - ğŸ›  [Global latency testing tool](https://latency.apex.sh)

* [ ] **Cookie å¤§å°:** ![medium](https://img.shields.io/badge/-medium-orange) å¦‚æœæ‚¨ä½¿ç”¨ cookieï¼Œè¯·ç¡®ä¿æ¯ä¸ª cookie ä¸è¶…è¿‡ 4096 å­—èŠ‚ï¼Œå¹¶ä¸”ä¸€ä¸ªåŸŸåä¸‹ä¸è¶…è¿‡ 20 ä¸ª cookieã€‚

  _ä¸ºä»€ä¹ˆï¼š_

  > cookie å­˜åœ¨äº HTTP å¤´ä¸­ï¼Œåœ¨ Web æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´äº¤æ¢ã€‚ä¿æŒ cookie çš„å¤§å°å°½å¯èƒ½ä½æ˜¯éå¸¸é‡è¦çš„ï¼Œä»¥å°½é‡å‡å°‘å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“ã€‚

  _æ€ä¹ˆåšï¼š_

  > æ¶ˆé™¤ä¸å¿…è¦çš„ cookie

  - ğŸ“– [Cookie specification: RFC 6265](https://tools.ietf.org/html/rfc6265)
  - ğŸ“– [Cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies)
  - ğŸ›  [Browser Cookie Limits](http://browsercookielimits.squawky.net/)
  - ğŸ“– [Website Performance: Cookies Don't Taste So Good - Monitis Blog](http://www.monitis.com/blog/website-performance-cookies-dont-taste-so-good/)
  - ğŸ“– [Google's Web Performance Best Practices #3: Minimize Request Overhead - GlobalDots Blog](https://www.globaldots.com/googles-web-performance-best-practices-3-minimize-request-overhead/)

- [ ] **æœ€å°åŒ– HTTP è¯·æ±‚ï¼š** ![high](https://img.shields.io/badge/-high-red) å§‹ç»ˆç¡®ä¿æ‰€è¯·æ±‚çš„æ¯ä¸ªæ–‡ä»¶å¯¹ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ï¼Œå°½å¯èƒ½å‡å°‘ http è¯·æ±‚ã€‚

* ğŸ“– [Combine external CSS](https://varvy.com/pagespeed/combine-external-css.html)
* ğŸ“– [Combine external JavaScript](https://varvy.com/pagespeed/combine-external-javascript.html)

- [ ] **ä½¿ç”¨ CDN æä¾›é™æ€æ–‡ä»¶ï¼š** ![medium](https://img.shields.io/badge/-medium-orange) ä½¿ç”¨ CDN å¯ä»¥æ›´å¿«åœ°åœ¨å…¨çƒèŒƒå›´å†…è·å–åˆ°ä½ çš„é™æ€æ–‡ä»¶ã€‚

* ğŸ“– [10 Tips to Optimize CDN Performance - CDN Planet](https://www.cdnplanet.com/blog/10-tips-optimize-cdn-performance/)
* ğŸ“– [HTTP Caching Â |Â  Web Fundamentals Â |Â  Google Developers](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching)

- [ ] **æä¾›æ¥è‡ªç›¸åŒåè®®çš„æ–‡ä»¶ï¼š** ![high](https://img.shields.io/badge/-high-red) é¿å…ç½‘ç«™ä½¿ç”¨ HTTPS åŒæ—¶ä½¿ç”¨ HTTP æ¥æä¾›ç›¸åŒæºåœ°å€çš„æ–‡ä»¶ã€‚

- [ ] **æä¾›å¯è®¿é—®çš„æ–‡ä»¶ï¼š** ![high](https://img.shields.io/badge/-high-red) é¿å…è¯·æ±‚æ— æ³•è®¿é—®çš„æ–‡ä»¶ï¼ˆ404ï¼‰ã€‚

- [ ] **æ­£ç¡®è®¾ç½® HTTP ç¼“å­˜æ ‡å¤´ï¼š** ![high](https://img.shields.io/badge/-high-red) åˆç†è®¾ç½® HTTP ç¼“å­˜æ ‡å¤´æ¥å‡å°‘ http è¯·æ±‚æ¬¡æ•°ã€‚

- [ ] **å¯ç”¨ GZIP å‹ç¼©** ![high](https://img.shields.io/badge/-high-red)ä½¿ç”¨å‹ç¼©æ–¹æ³•ï¼ˆå¦‚ Gzip æˆ– Brotliï¼‰æ¥å‡å° JavaScript æ–‡ä»¶çš„å¤§å°ã€‚ä½¿ç”¨è¾ƒå°å°ºå¯¸çš„æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«åœ°ä¸‹è½½èµ„æºï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚

* ğŸ“– [Check GZIP compression](https://checkgzipcompression.com/)
* ğŸ›  [Check Brotli Compression](https://tools.keycdn.com/brotli-test)
* ğŸ“– [Can I use... Brotli](https://caniuse.com/#feat=brotli)

- [ ] **åˆ†åŸŸå­˜æ”¾èµ„æºï¼š** ![medium](https://img.shields.io/badge/-medium-orange) ç”±äºæµè§ˆå™¨åŒä¸€åŸŸåå¹¶è¡Œä¸‹è½½æ•°æœ‰é™ï¼Œåˆ©ç”¨å¤šåŸŸåä¸»æœºå­˜æ”¾é™æ€èµ„æºï¼Œå¢åŠ å¹¶è¡Œä¸‹è½½æ•°ï¼Œç¼©çŸ­èµ„æºåŠ è½½æ—¶é—´

- [ ] **å‡å°‘é¡µé¢é‡å®šå‘** ![high](https://img.shields.io/badge/-high-red)

**[â¬† è¿”å›é¡¶éƒ¨](#table-of-contents)**

---

### æ€§èƒ½ä¸å‰ç«¯æ¡†æ¶

#### Angular

- ğŸ“– [Angular Performance Checklist](https://github.com/mgechev/angular-performance-checklist)

#### React

- ğŸ“– [Optimizing Performance - React](https://reactjs.org/docs/optimizing-performance.html)
- ğŸ“– [React image manipulation | Cloudinary](https://cloudinary.com/documentation/react_image_manipulation)
- ğŸ“– [Debugging React performance with React 16 and Chrome Devtools.](https://building.calibreapp.com/debugging-react-performance-with-react-16-and-chrome-devtools-c90698a522ad)

#### WordPress

- ğŸ›  [Test Your Website Speed | WordPress Hosting by @WPEngine](https://wpengine.com/speed-tool/)

##### æ–‡ç« 

- ğŸ“– [19 Tips to Speed Up WordPress Performance (Updated)](https://www.wpbeginner.com/wordpress-performance-speed/)
- ğŸ“– [Speed Up Your WordPress - How to Save Images Optimized for Web](https://www.wpbeginner.com/beginners-guide/speed-wordpress-save-images-optimized-web/)

##### æ’ä»¶æ¨è

- ğŸ›  [Caching Plugin for WordPress - Speed up your website with WP Rocket](https://wp-rocket.me/)
- ğŸ›  [WP-Sweep | WordPress.org](https://wordpress.org/plugins/wp-sweep/)
- ğŸ›  [Imagify Image Optimizer | WordPress.org](https://wordpress.org/plugins/imagify/)

---

### Translations

The Front-End Performance Checklist wants to also be available in other languages! Don't hesitate to submit your contribution!

- ğŸ‡µğŸ‡¹ Portuguese: [fernandofawkes/Front-End-Performance-Checklist](https://github.com/fernandofawkes/Front-End-Performance-Checklist)
- ğŸ‡¨ğŸ‡³ Chinese: [JohnsenZhou/Front-End-Performance-Checklist](https://github.com/JohnsenZhou/Front-End-Performance-Checklist)
- ğŸ‡·ğŸ‡º Russian: [lex111/Front-End-Performance-Checklist](https://github.com/lex111/Front-End-Performance-Checklist)
- ğŸ‡«ğŸ‡· French: [WilliamDASILVA/Front-End-Performance-Checklist](https://github.com/WilliamDASILVA/Front-End-Performance-Checklist)
- ğŸ‡°ğŸ‡· Korean: [ParkSB/Front-End-Performance-Checklist](https://github.com/ParkSB/Front-End-Performance-Checklist)
- ğŸ‡ªğŸ‡¸ Spanish: [dagerzuga/Front-End-Performance-Checklist](https://github.com/dagerzuga/Front-End-Performance-Checklist)
- ğŸ‡»ğŸ‡® Vietnamese : [huynhan147/Front-End-Performance-Checklist](https://github.com/huynhan147/FrontEnd-Performance-Checklist)

## ä¸‰ã€Webpack ä¼˜åŒ–æ„å»ºé€Ÿåº¦

### 3.1ã€ ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´

**æœç´¢è¿‡ç¨‹ä¼˜åŒ–åŒ…æ‹¬:**

::: tip

- ä¼˜åŒ– resolve.modules é…ç½®
- ä¼˜åŒ– resolve.noParse é…ç½®
- ä¼˜åŒ– resolve.extensions é…ç½®
- ä¼˜åŒ– resolve.noParse é…ç½®
- ä¼˜åŒ– ä¼˜åŒ– Loader é…ç½®

:::

1. **ä¼˜åŒ– resolve.modules é…ç½®**

   resolve.modules ç”¨äºé…ç½® Webpack å»å“ªäº›ç›®å½•ä¸‹å¯»æ‰¾ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚resolve.modules çš„é»˜è®¤å€¼æ˜¯ï¼»node modulesï¼½ï¼Œå«ä¹‰æ˜¯å…ˆå»å½“å‰ç›®å½•çš„/node modules ç›®å½•ä¸‹å»æ‰¾æˆ‘ä»¬æƒ³æ‰¾çš„æ¨¡å—ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±å»ä¸Šä¸€çº§ç›®å½•../node modules ä¸­æ‰¾ï¼Œå†æ²¡æœ‰å°±å»../ .. /node modules ä¸­æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™å’Œ Node.js çš„æ¨¡å—å¯»æ‰¾æœºåˆ¶å¾ˆç›¸ä¼¼ã€‚å½“å®‰è£…çš„ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•çš„./node modules ç›®å½•ä¸‹æ—¶ï¼Œå°±æ²¡æœ‰å¿…è¦æŒ‰ç…§é»˜è®¤çš„æ–¹å¼å»ä¸€å±‚å±‚åœ°å¯»æ‰¾ï¼Œå¯ä»¥æŒ‡æ˜å­˜æ”¾ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»å¯¹è·¯å¾„ï¼Œä»¥å‡å°‘å¯»æ‰¾ã€‚

**ä¼˜åŒ–åçš„é…ç½®**

```js
resolve: {
// ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‡æ˜ç¬¬ä¸‰æ–¹æ¨¡å—å­˜æ”¾çš„ä½ç½®ï¼Œä»¥å‡å°‘æœç´¢æ­¥éª¤
modules: [path.resolve(__dirname,'node_modules')]
},
```

- **è®¾ç½® resolve.mainFields:['main']ï¼Œè®¾ç½®å°½é‡å°‘çš„å€¼å¯ä»¥å‡å°‘å…¥å£æ–‡ä»¶çš„æœç´¢æ­¥éª¤**.
  > ç¬¬ä¸‰æ–¹æ¨¡å—ä¸ºäº†é€‚åº”ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒï¼Œä¼šå®šä¹‰å¤šä¸ªå…¥å£æ–‡ä»¶ï¼ŒmainFields å®šä¹‰ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—çš„å“ªä¸ªå…¥å£æ–‡ä»¶ï¼Œç”±äºå¤§å¤šæ•°ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½ä½¿ç”¨ main å­—æ®µæè¿°å…¥å£æ–‡ä»¶çš„ä½ç½®ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®å•ç‹¬ä¸€ä¸ª main å€¼ï¼Œå‡å°‘æœç´¢

2. **ä¼˜åŒ– resolve.alias é…ç½®**

**å¯¹åºå¤§çš„ç¬¬ä¸‰æ–¹æ¨¡å—è®¾ç½® resolve.alias**, ä½¿ webpack ç›´æ¥ä½¿ç”¨åº“çš„ min æ–‡ä»¶ï¼Œé¿å…åº“å†…è§£æã€‚

```js
 alias: {
  '@': resolve('src'),
},
// é€šè¿‡ä»¥ä¸Šçš„é…ç½®ï¼Œå¼•ç”¨srcåº•ä¸‹çš„common.jsæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥è¿™ä¹ˆå†™
import common from '@/common.js';
```

è¿™æ ·ä¼šå½±å“ Tree-Shakingï¼Œé€‚åˆå¯¹æ•´ä½“æ€§æ¯”è¾ƒå¼ºçš„åº“ä½¿ç”¨ï¼Œå¦‚æœæ˜¯åƒ lodash è¿™ç±»å·¥å…·ç±»çš„æ¯”è¾ƒåˆ†æ•£çš„åº“ï¼Œæ¯”è¾ƒé€‚åˆ Tree-Shakingï¼Œé¿å…ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚

3. **ä¼˜åŒ– resolve.extensions**

**åˆç†é…ç½® resolve.extensionsï¼Œå‡å°‘æ–‡ä»¶æŸ¥æ‰¾**
é»˜è®¤å€¼ï¼šextensions:['.js', '.json'],å½“å¯¼å…¥è¯­å¥æ²¡å¸¦æ–‡ä»¶åç¼€æ—¶ï¼ŒWebpack ä¼šæ ¹æ® extensions å®šä¹‰çš„åç¼€åˆ—è¡¨è¿›è¡Œæ–‡ä»¶æŸ¥æ‰¾ï¼Œæ‰€ä»¥ï¼š

- **åˆ—è¡¨å€¼å°½é‡å°‘**
- **é¢‘ç‡é«˜çš„æ–‡ä»¶ç±»å‹çš„åç¼€å†™åœ¨å‰é¢**
- **æºç ä¸­çš„å¯¼å…¥è¯­å¥å°½å¯èƒ½çš„å†™ä¸Šæ–‡ä»¶åç¼€ï¼Œå¦‚ require(./data)è¦å†™æˆ require(./data.json)**

4. `module.noParse`**å­—æ®µå‘Šè¯‰ Webpack ä¸å¿…è§£æå“ªäº›æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥æ’é™¤å¯¹éæ¨¡å—åŒ–åº“æ–‡ä»¶çš„è§£æ**.

noParse é…ç½®é¡¹å¯ä»¥è®© Webpack å¿½ç•¥å¯¹éƒ¨åˆ†æ²¡é‡‡ç”¨æ¨¡å—åŒ–çš„æ–‡ä»¶çš„é€’å½’è§£æå’Œå¤„ç†ï¼Œè¿™ æ ·åšçš„å¥½å¤„æ˜¯èƒ½æé«˜æ„å»ºæ€§èƒ½ã€‚åŸå› æ˜¯ä¸€äº›åº“å¦‚ jQueryã€ChartJS åºå¤§åˆæ²¡æœ‰é‡‡ç”¨æ¨¡å—åŒ–æ ‡å‡†ï¼Œè®© Webpack å»è§£æè¿™äº›æ–‡ä»¶æ—¢è€—æ—¶åˆæ²¡æœ‰æ„ä¹‰ã€‚
noParse æ˜¯å¯é€‰çš„é…ç½®é¡¹ï¼Œç±»å‹éœ€è¦æ˜¯ RegExp ã€[RegExp]ã€function ä¸­çš„ä¸€ç§ã€‚ä¾‹å¦‚ï¼Œè‹¥æƒ³è¦å¿½ç•¥ jQuery ã€ChartJS ï¼Œåˆ™ä¼˜åŒ–é…ç½®å¦‚ä¸‹ï¼š

```js
// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
noParse: /jquerylchartjs/;
// ä½¿ç”¨å‡½æ•°ï¼Œä» Webpack3.0.0å¼€å§‹æ”¯æŒ
noParse: content => {
  // è¿”å›trueæˆ–false
  return /jquery|chartjs/.test(content);
};
```

5. **ä¼˜åŒ– loader é…ç½®ï¼Œé€šè¿‡ testã€excludeã€include ç¼©å°æœç´¢èŒƒå›´**;

- (1ï¼‰**ä¼˜åŒ–æ­£åˆ™åŒ¹é…**
- (2ï¼‰**é€šè¿‡ cacheDirectory é€‰é¡¹å¼€å¯ç¼“å­˜**
- (3ï¼‰**é€šè¿‡ includeã€exclude æ¥å‡å°‘è¢«å¤„ç†çš„æ–‡ä»¶**

```js
{
  // 1ã€å¦‚æœé¡¹ç›®æºç ä¸­åªæœ‰jsæ–‡ä»¶ï¼Œå°±ä¸è¦å†™æˆ/\.jsx?$/ï¼Œä»¥æå‡æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½
  test: /\.js$/,
  // 2ã€babel-loaderæ”¯æŒç¼“å­˜è½¬æ¢å‡ºçš„ç»“æœï¼Œé€šè¿‡cacheDirectoryé€‰é¡¹å¼€å¯
  loader: 'babel-loader?cacheDirectory',
  // 3ã€åªå¯¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„src ç›®å½•ä¸­çš„æ–‡ä»¶é‡‡ç”¨ babel-loader
  include: [resolve('src')]
},


```

### 3.2ã€ä½¿ç”¨ DllPlugin å‡å°‘åŸºç¡€æ¨¡å—ç¼–è¯‘æ¬¡æ•°

DllPlugin åŠ¨æ€é“¾æ¥åº“æ’ä»¶ï¼Œ`å…¶åŸç†æ˜¯æŠŠç½‘é¡µä¾èµ–çš„åŸºç¡€æ¨¡å—æŠ½ç¦»å‡ºæ¥æ‰“åŒ…åˆ°dllæ–‡ä»¶ä¸­ï¼Œå½“éœ€è¦å¯¼å…¥çš„æ¨¡å—å­˜åœ¨äºæŸä¸ªdllä¸­æ—¶ï¼Œè¿™ä¸ªæ¨¡å—ä¸å†è¢«æ‰“åŒ…`ï¼Œè€Œæ˜¯å» dll ä¸­è·å–ã€‚**ä¸ºä»€ä¹ˆä¼šæå‡æ„å»ºé€Ÿåº¦å‘¢?**åŸå› åœ¨äº dll ä¸­å¤§å¤šåŒ…å«çš„æ˜¯å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¦‚ reactã€react-domï¼Œæ‰€ä»¥åªè¦è¿™äº›æ¨¡å—ç‰ˆæœ¬ä¸å‡çº§ï¼Œå°±åªéœ€è¢«ç¼–è¯‘ä¸€æ¬¡ã€‚æˆ‘è®¤ä¸ºè¿™æ ·åšå’Œé…ç½® resolve.alias å’Œ module.noParse çš„æ•ˆæœæœ‰å¼‚æ›²åŒå·¥çš„æ•ˆæœã€‚

[è¯¦æƒ… demo è¯·è§:lucky_vue_template](https://github.com/MrGaoGang/lucky_vue_template)

1. ä½¿ç”¨ DllPlugin é…ç½®ä¸€ä¸ª webpack.dll.config.js æ¥æ„å»º dll æ–‡ä»¶ï¼š

```js
var path = require("path");
var webpack = require("webpack");
var CleanWebpackPlugin = require("clean-webpack-plugin");

var vendor = ["vue", "vuex", "vue-router"];
var vendordev = ["vue/dist/vue.esm.js", "vuex", "vue-router"]; //é›†æˆå¼€å‘ç‰ˆæœ¬vue
var config = require("./config/config.js");
module.exports = {
  //ä½ æƒ³è¦æ‰“åŒ…çš„æ¨¡å—æ•°ç»„
  entry: {
    vendor: vendor,
    vendordev: vendordev
  },
  output: {
    path: path.join(__dirname, config.dllRoot),
    filename: "[name].dll.js",
    library: "[name]_library"
    //vendor.dll.js ä¸­æš´éœ²å‡ºçš„å…¨å±€å˜é‡
    //ä¸»è¦æ˜¯ç»™DllPluginä¸­çš„name ä½¿ç”¨
    //æ•…è¿™é‡Œéœ€è¦å’Œwebpack.DllPlugin ä¸­çš„ 'name :[name]_libray ä¿æŒä¸€è‡´
  },
  plugins: [
    new CleanWebpackPlugin(),
    new webpack.DllPlugin({
      path: path.join(__dirname, config.dllRoot, "[name]-manifest.json"),
      name: "[name]_library",
      context: __dirname
    })
  ]
};
```

> éœ€è¦æ³¨æ„ DllPlugin çš„å‚æ•°ä¸­ name å€¼å¿…é¡»å’Œ output.library å€¼ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”ç”Ÿæˆçš„ manifest æ–‡ä»¶ä¸­ä¼šå¼•ç”¨ output.library å€¼ã€‚

2. åœ¨ä¸» config æ–‡ä»¶é‡Œä½¿ç”¨ DllReferencePlugin æ’ä»¶å¼•å…¥ xxx-manifest.json æ–‡ä»¶ï¼š

```js
[
  new webpack.DllReferencePlugin({
    context: __dirname,
    manifest: require(config.dllPath(true, true))
  }),

  new HtmlWebpackTagsPlugin({ tags: ["/dll/vendor.dll.js"], append: false }),

  new CopyWebpackPlugin([
    {
      from: path.join(__dirname, config.dllPath(true, false)),
      to: path.join(__dirname, config.dllVendorTarget)
    }
  ])
];
```

### 3.3ã€ä½¿ç”¨ externals å‡å°‘åŸºç¡€æ¨¡å—ç¼–è¯‘æ¬¡æ•°

æˆ‘ä»¬åœ¨ä½¿ç”¨çš„ js åº“å¦‚ vue æˆ–è€… react ç­‰çš„æ—¶å€™ï¼Œwebpack ä¼šå°†å®ƒä»¬ä¸€èµ·æ‰“åŒ…ï¼Œreact å’Œ react-dom æ–‡ä»¶å°±å¥½å‡ ç™¾ kï¼Œå…¨éƒ¨æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œç”¨æˆ·åœ¨é¦–æ¬¡æ‰“å¼€æ—¶å°±å¾€å¾€ä¼šå‡ºç°ç™½å±ç­‰å¾…æ—¶é—´è¿‡é•¿çš„é—®é¢˜ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†è¿™ç±»æ–‡ä»¶æŠ½ç¦»å‡ºæ¥ã€‚

```js
externals: {
        "react": "React",
        "react-dom": "ReactDOM"
    },
```

è¿™é‡Œæˆ‘ä»¬ä¼šç”¨åˆ° externalsï¼Œå®ƒå’Œ plugins æ˜¯å¹³çº§ã€‚å·¦ä¾§ key è¡¨ç¤ºä¾èµ–ï¼Œå³ä¾§ value è¡¨ç¤ºæ–‡ä»¶ä¸­ä½¿ç”¨çš„å¯¹è±¡ã€‚æ¯”å¦‚åœ¨ react å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šè¿™æ ·åœ¨æ–‡ä»¶å¤´éƒ¨å†™ import React from 'react'ï¼Œè¿™é‡Œå¤§å®¶å¯ä»¥å’Œä¸Šé¢å¯¹å·å…¥åº§ä¸‹ã€‚

> è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œå•ç‹¬çš„å¼•å…¥ä½¿ç”¨äº†ï¼Œåœ¨ index.html ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 

```html
<script src="./node_modules/react/umd/react.xxx.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.xxx.js"></script>
```

ä¸è¿‡ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸Šçº¿çš„æ—¶å€™ä¸å¯èƒ½ä¼šå¸¦æœ‰ node_modules,æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸€ä¸ª copy æ’ä»¶å°† react å’Œ react-dom æ–‡ä»¶å¤åˆ¶å‡ºæ¥

```js
 new CopyWebpackPlugin([ // fromæ˜¯è¦copyçš„æ–‡ä»¶ï¼Œtoæ˜¯ç”Ÿæˆå‡ºæ¥çš„æ–‡ä»¶
            { from: "node_modules/react/umd/react.xxx.js", to: "js/react.min.js" },
            { from: "node_modules/react-dom/umd/react-dom.xxx.js", to: "js/react-dom.min.js" }
            { from: "public/favicon.ico", to: "favicon.ico" }
        ])
```

### 3.4ã€ä½¿ç”¨ HappyPack å¤šè¿›ç¨‹è§£æå’Œå¤„ç†æ–‡ä»¶

ç”±äºæœ‰å¤§é‡æ–‡ä»¶éœ€è¦è§£æå’Œå¤„ç†ï¼Œæ‰€ä»¥æ„å»ºæ˜¯æ–‡ä»¶è¯»å†™å’Œè®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œç‰¹åˆ«æ˜¯å½“æ–‡ä»¶æ•°é‡å˜å¤šåï¼ŒWebpack æ„å»ºæ…¢çš„é—®é¢˜ä¼šæ˜¾å¾—æ›´ä¸ºä¸¥é‡ã€‚è¿è¡Œåœ¨ Node.ä¹‹ä¸Šçš„ Webpack æ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Webpack éœ€è¦ä¸€ä¸ªä¸€ä¸ªåœ°å¤„ç†ä»»åŠ¡ï¼Œä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚Happy Pack ( https://github.com/amireh/happypack ï¼‰å°±èƒ½è®© Webpack åšåˆ°è¿™ä¸€ç‚¹ï¼Œ`å®ƒå°†ä»»åŠ¡åˆ†è§£ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘æ‰§è¡Œ,å­è¿›ç¨‹å¤„ç†å®Œåå†å°†ç»“æœå‘é€ç»™ä¸»è¿›`ã€‚

**é…ç½®å¦‚ä¸‹**

- HappyPack æ’ä»¶å®‰è£…ï¼š
  `$ npm i -D happypack`

- webpack.base.conf.js æ–‡ä»¶å¯¹ module.rules è¿›è¡Œé…ç½®

```js
    module: {
     rules: [
      {
        test: /\.js$/,
        // å°†å¯¹.js æ–‡ä»¶çš„å¤„ç†è½¬äº¤ç»™ id ä¸º babel çš„HappyPackå®ä¾‹
          use:['happypack/loader?id=babel'],
          include: [resolve('src'), resolve('test'),
            resolve('node_modules/webpack-dev-server/client')],
        // æ’é™¤ç¬¬ä¸‰æ–¹æ’ä»¶
          exclude:path.resolve(__dirname,'node_modules'),
        },
        {
          test: /\.vue$/,
          use: ['happypack/loader?id=vue'],
        },
      ]
    },
```

- ï¼ˆ3ï¼‰webpack.prod.conf.js æ–‡ä»¶è¿›è¡Œé…ç½®

```js
const HappyPack = require("happypack");
// æ„é€ å‡ºå…±äº«è¿›ç¨‹æ± ï¼Œåœ¨è¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹
const HappyPackThreadPool = HappyPack.ThreadPool({ size: 5 });
plugins: [
  new HappyPack({
    // ç”¨å”¯ä¸€çš„æ ‡è¯†ç¬¦idï¼Œæ¥ä»£è¡¨å½“å‰çš„HappyPackæ˜¯ç”¨æ¥å¤„ç†ä¸€ç±»ç‰¹å®šçš„æ–‡ä»¶
    id: "vue",
    loaders: [
      {
        loader: "vue-loader",
        options: vueLoaderConfig
      }
    ],
    threadPool: HappyPackThreadPool
  }),

  new HappyPack({
    // ç”¨å”¯ä¸€çš„æ ‡è¯†ç¬¦idï¼Œæ¥ä»£è¡¨å½“å‰çš„HappyPackæ˜¯ç”¨æ¥å¤„ç†ä¸€ç±»ç‰¹å®šçš„æ–‡ä»¶
    id: "babel",
    // å¦‚ä½•å¤„ç†.jsæ–‡ä»¶ï¼Œç”¨æ³•å’ŒLoaderé…ç½®ä¸­ä¸€æ ·
    loaders: ["babel-loader?cacheDirectory"],
    threadPool: HappyPackThreadPool
  })
];
```

### 3.5ã€ ä½¿ç”¨ ParallelUglifyPlugin å¼€å¯å¤šè¿›ç¨‹å‹ç¼© JS æ–‡ä»¶

ç”±äºå‹ç¼© JavaScript ä»£ç æ—¶ï¼Œéœ€è¦å…ˆå°†ä»£ç è§£ææˆç”¨ Object æŠ½è±¡è¡¨ç¤ºçš„ AST è¯­æ³•æ ‘ï¼Œå†å»åº”ç”¨å„ç§è§„åˆ™åˆ†æå’Œå¤„ç† AST ï¼Œæ‰€ä»¥å¯¼è‡´è¿™ä¸ªè¿‡ç¨‹çš„è®¡ç®—é‡å·¨å¤§ï¼Œè€—æ—¶éå¸¸å¤šã€‚å½“ Webpack æœ‰å¤šä¸ª JavaScript æ–‡ä»¶éœ€è¦è¾“å‡ºå’Œå‹ç¼©æ—¶ï¼ŒåŸæœ¬ä¼šä½¿ç”¨ UglifyJS å»ä¸€ä¸ªä¸€ä¸ªå‹ç¼©å†è¾“å‡ºï¼Œä½†æ˜¯ ParallelUglifyPlugin ä¼šå¼€å¯å¤šä¸ªå­è¿›ç¨‹ï¼Œå°†å¯¹å¤šä¸ªæ–‡ä»¶çš„å‹ç¼©å·¥ä½œåˆ†é…ç»™å¤šä¸ªå­è¿›ç¨‹å»å®Œæˆï¼Œæ¯ä¸ªå­è¿›ç¨‹å…¶å®è¿˜æ˜¯é€šè¿‡ UglifyJS å»å‹ç¼©ä»£ç ï¼Œä½†æ˜¯å˜æˆäº†å¹¶è¡Œæ‰§è¡Œã€‚æ‰€ä»¥ ParallelUglify Plugin èƒ½æ›´å¿«åœ°å®Œæˆå¯¹å¤šä¸ªæ–‡ä»¶çš„å‹ç¼©å·¥ä½œã€‚

```js
ï¼ˆ1ï¼‰ParallelUglifyPluginæ’ä»¶å®‰è£…ï¼š
     $ npm i -D webpack-parallel-uglify-plugin
ï¼ˆ2ï¼‰webpack.prod.conf.js æ–‡ä»¶è¿›è¡Œé…ç½®
    const ParallelUglifyPlugin =require('webpack-parallel-uglify-plugin');
    plugins: [
    new ParallelUglifyPlugin({
      cacheDir: '.cache/',
      uglifyJs:{
        compress: {
          warnings: false
        },
        sourceMap: true
      }
     }),
    ]


```

### 3.6ã€ä½¿ç”¨è‡ªåŠ¨åˆ·æ–°

å€ŸåŠ©è‡ªåŠ¨åŒ–çš„æ‰‹æ®µï¼Œåœ¨ç›‘å¬åˆ°æœ¬åœ°æºç æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºå‡ºå¯è¿è¡Œçš„ä»£ç åå†æ§åˆ¶æµè§ˆå™¨åˆ·æ–°ã€‚Webpack å°†è¿™äº›åŠŸèƒ½éƒ½å†…ç½®äº†ï¼Œå¹¶ä¸”æä¾›äº†å¤šç§æ–¹æ¡ˆä¾›æˆ‘ä»¬é€‰æ‹©ã€‚

Webpack å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼å¼€å¯ç›‘å¬ï¼š

1. å¯åŠ¨ webpack æ—¶åŠ ä¸Š--watch å‚æ•°ï¼›
2. åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® watch:true

**Webpack é…ç½®**
[å®˜æ–¹æ–‡æ¡£ç‚¹å‡»è¿™é‡Œ](https://www.webpackjs.com/configuration/watch/)

```js
module.exports = {
  watch: true,
  watchOptions: {
    ignored: /node_modules/,
    aggregateTimeout: 300, //æ–‡ä»¶å˜åŠ¨åå¤šä¹…å‘èµ·æ„å»ºï¼Œè¶Šå¤§è¶Šå¥½
    poll: 1000 //æ¯ç§’è¯¢é—®æ¬¡æ•°ï¼Œè¶Šå°è¶Šå¥½
  }
};
```

**ç›¸å…³ä¼˜åŒ–æªæ–½ï¼š**

- (1ï¼‰é…ç½®å¿½ç•¥ä¸€äº›ä¸ç›‘å¬çš„ä¸€äº›æ–‡ä»¶ï¼Œå¦‚ï¼šnode_modulesã€‚
- (2ï¼‰watchOptions.aggregateTirneout çš„å€¼è¶Šå¤§æ€§èƒ½è¶Šå¥½ï¼Œå› ä¸ºè¿™èƒ½é™ä½é‡æ–°æ„å»ºçš„é¢‘ç‡ã€‚
- (3ï¼‰watchOptions.poll çš„å€¼è¶Šå°è¶Šå¥½ï¼Œå› ä¸ºè¿™èƒ½é™ä½æ£€æŸ¥çš„é¢‘ç‡ã€‚

**Vue Cli å¯é…ç½®å¦‚ä¸‹ï¼š**

```js
devServer: {
  watchOptions: {
    // ä¸ç›‘å¬çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…
    ignored: /node_modules/,
    // ç›‘å¬åˆ°å˜åŒ–åç­‰300mså†å»æ‰§è¡ŒåŠ¨ä½œ
    aggregateTimeout: 300,
    // é»˜è®¤æ¯ç§’è¯¢é—®1000æ¬¡
    poll: 1000
  }
},


```

### 3.7ã€å¼€å¯æ¨¡å—çƒ­æ›¿æ¢

æ¨¡å—çƒ­æ›¿æ¢ä¸åˆ·æ–°æ•´ä¸ªç½‘é¡µè€Œåªé‡æ–°ç¼–è¯‘å‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼Œå¹¶ç”¨æ–°æ¨¡å—æ›¿æ¢è€æ¨¡å—ï¼Œæ‰€ä»¥é¢„è§ˆååº”æ›´å¿«ï¼Œç­‰å¾…æ—¶é—´æ›´å°‘ï¼ŒåŒæ—¶ä¸åˆ·æ–°é¡µé¢èƒ½ä¿ç•™å½“å‰ç½‘é¡µçš„è¿è¡ŒçŠ¶æ€ã€‚åŸç†ä¹Ÿæ˜¯å‘æ¯ä¸€ä¸ª chunk ä¸­æ³¨å…¥ä»£ç†å®¢æˆ·ç«¯æ¥è¿æ¥ DevServer å’Œç½‘é¡µã€‚å¼€å¯æ–¹å¼ï¼š

- **webpack-dev-server --hot**
- **ä½¿ç”¨ HotModuleReplacementPluginï¼Œæ¯”è¾ƒéº»çƒ¦**

`å¼€å¯åå¦‚æœä¿®æ”¹å­æ¨¡å—å°±å¯ä»¥å®ç°å±€éƒ¨åˆ·æ–°ï¼Œä½†å¦‚æœä¿®æ”¹çš„æ˜¯æ ¹JSæ–‡ä»¶ï¼Œä¼šæ•´é¡µåˆ·æ–°`ï¼ŒåŸå› åœ¨äºï¼Œå­æ¨¡å—æ›´æ–°æ—¶ï¼Œäº‹ä»¶ä¸€å±‚å±‚å‘ä¸Šä¼ é€’ï¼Œç›´åˆ°æŸå±‚çš„æ–‡ä»¶æ¥æ”¶äº†å½“å‰å˜åŒ–çš„æ¨¡å—ï¼Œç„¶åæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å¦‚æœä¸€å±‚å±‚å‘å¤–æŠ›ç›´åˆ°æœ€å¤–å±‚éƒ½æ²¡æœ‰æ–‡ä»¶æ¥æ”¶ï¼Œå°±ä¼šåˆ·æ–°æ•´é¡µã€‚
ä½¿ç”¨ `NamedModulesPlugin å¯ä»¥ä½¿æ§åˆ¶å°æ‰“å°å‡ºè¢«æ›¿æ¢çš„æ¨¡å—çš„åç§°è€Œéæ•°å­—ID`ï¼Œå¦å¤–åŒ webpack ç›‘å¬ï¼Œ`å¿½ç•¥node_modulesç›®å½•çš„æ–‡ä»¶å¯ä»¥æå‡æ€§èƒ½`ã€‚

```js
devServer: {
  hot: true,
},
plugins: [
  new webpack.HotModuleReplacementPlugin(),
// æ˜¾ç¤ºè¢«æ›¿æ¢æ¨¡å—çš„åç§°
  new webpack.NamedModulesPlugin(), // HMR shows correct file names
]


```

## å››ã€ä¼˜åŒ–è¾“å‡ºè´¨é‡-å‹ç¼©æ–‡ä»¶ä½“ç§¯

### 4.1ã€åŒºåˆ†ç¯å¢ƒ--å‡å°ç”Ÿäº§ç¯å¢ƒä»£ç ä½“ç§¯

ä»£ç è¿è¡Œç¯å¢ƒåˆ†ä¸ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œä»£ç éœ€è¦æ ¹æ®ä¸åŒç¯å¢ƒåšä¸åŒçš„æ“ä½œï¼Œè®¸å¤šç¬¬ä¸‰æ–¹åº“ä¸­ä¹Ÿæœ‰å¤§é‡çš„æ ¹æ®å¼€å‘ç¯å¢ƒåˆ¤æ–­çš„ if else ä»£ç ï¼Œæ„å»ºä¹Ÿéœ€è¦æ ¹æ®ä¸åŒç¯å¢ƒè¾“å‡ºä¸åŒçš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦ä¸€å¥—æœºåˆ¶å¯ä»¥åœ¨æºç ä¸­åŒºåˆ†ç¯å¢ƒï¼ŒåŒºåˆ†ç¯å¢ƒä¹‹åå¯ä»¥ä½¿è¾“å‡ºçš„ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ä½“ç§¯å‡å°ã€‚

ç¯å¢ƒé…ç½®ï¼š

```js
//ç”Ÿäº§ç¯å¢ƒ
mode: "pruduction";
//æµ‹è¯•ç¯å¢ƒ
mode: "development";
```

ä»£ç ä½¿ç”¨ï¼š

```js
if (process.env.NODE_ENV === "production") {
  console.log("ä½ åœ¨ç”Ÿäº§ç¯å¢ƒ");
  doSth();
} else {
  console.log("ä½ åœ¨å¼€å‘ç¯å¢ƒ");
  doSthElse();
}
```

### 4.2ã€å‹ç¼©ä»£ç -JSã€ESã€CSS

1. å‹ç¼© js

   > webpack4 å·²ç»é»˜è®¤å¼€å¯ä»£ç å‹ç¼©ã€‚

2. å‹ç¼© ES6ï¼šç¬¬ä¸‰æ–¹ UglifyJS æ’ä»¶

éšç€è¶Šæ¥è¶Šå¤šçš„æµè§ˆå™¨æ”¯æŒç›´æ¥æ‰§è¡Œ ES6 ä»£ç ï¼Œåº”å°½å¯èƒ½çš„è¿è¡ŒåŸç”Ÿ ES6ï¼Œè¿™æ ·æ¯”èµ·è½¬æ¢åçš„ ES5 ä»£ç ï¼Œä»£ç é‡æ›´å°‘ï¼Œä¸” ES6 ä»£ç æ€§èƒ½æ›´å¥½ã€‚ç›´æ¥è¿è¡Œ ES6 ä»£ç æ—¶ï¼Œä¹Ÿéœ€è¦ä»£ç å‹ç¼©ï¼Œç¬¬ä¸‰æ–¹çš„`uglify-webpack-plugin`æä¾›äº†å‹ç¼© ES6 ä»£ç çš„åŠŸèƒ½ã€‚

**å¦å¤–è¦é˜²æ­¢ babel-loader è½¬æ¢ ES6 ä»£ç ï¼Œè¦åœ¨.babelrc ä¸­å»æ‰ babel-preset-envï¼Œå› ä¸ºæ­£æ˜¯ babel-preset-env è´Ÿè´£æŠŠ ES6 è½¬æ¢ä¸º ES5ã€‚**

```js
npm i -D uglify-webpack-plugin@beta //è¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶
//webpack.config.json
const UglifyESPlugin = require('uglify-webpack-plugin');
//...
plugins:[
    new UglifyESPlugin({
        uglifyOptions: {  //æ¯”UglifyJSå¤šåµŒå¥—ä¸€å±‚
            compress: {
                warnings: false,
                drop_console: true,
                collapse_vars: true,
                reduce_vars: true
            },
            output: {
                beautify: false,
                comments: false
            }
        }
    })
]

```

### 4.3ã€å‹ç¼© CSSï¼šcss-loader?minimizeã€PurifyCSSPlugin

snano åŸºäº PostCSSï¼Œä¸ä»…æ˜¯åˆ æ‰ç©ºæ ¼ï¼Œè¿˜èƒ½ç†è§£ä»£ç å«ä¹‰ï¼Œä¾‹å¦‚æŠŠ`color:#ff0000` è½¬æ¢æˆ `color:red`ï¼Œcss-loader å†…ç½®äº† cssnanoï¼Œåªéœ€è¦ä½¿ç”¨ `css-loader?minimize` å°±å¯ä»¥å¼€å¯ cssnano å‹ç¼©ã€‚
å¦å¤–ä¸€ç§å‹ç¼© CSS çš„æ–¹å¼æ˜¯ä½¿ç”¨[PurifyCSSPlugin](https://github.com/webpack-contrib/purifycss-webpack)ï¼Œéœ€è¦é…åˆ `extract-text-webpack-plugin` ä½¿ç”¨ï¼Œå®ƒä¸»è¦çš„ä½œç”¨æ˜¯å¯ä»¥å»é™¤æ²¡æœ‰ç”¨åˆ°çš„ CSS ä»£ç ï¼Œç±»ä¼¼ JS çš„ Tree Shakingã€‚

### 4.4ã€å‹ç¼©å›¾ç‰‡

åœ¨ vue é¡¹ç›®ä¸­é™¤äº†å¯ä»¥åœ¨ webpack.base.conf.js ä¸­ `url-loader` ä¸­è®¾ç½® limit å¤§å°æ¥å¯¹å›¾ç‰‡å¤„ç†ï¼Œ`å¯¹å°äº limit çš„å›¾ç‰‡è½¬åŒ–ä¸º base64 æ ¼å¼`ï¼Œå…¶ä½™çš„ä¸åšæ“ä½œã€‚æ‰€ä»¥å¯¹æœ‰äº›è¾ƒå¤§çš„å›¾ç‰‡èµ„æºï¼Œåœ¨è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼ŒåŠ è½½ä¼šå¾ˆæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `image-webpack-loader` æ¥å‹ç¼©å›¾ç‰‡ï¼š

- ï¼ˆ1ï¼‰é¦–å…ˆï¼Œå®‰è£… image-webpack-loader ï¼š

```bash
npm install image-webpack-loader --save-dev

```

- (2) ç„¶åï¼Œåœ¨ webpack.base.conf.js ä¸­è¿›è¡Œé…ç½®ï¼š

```js
{
  test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
  use:[
    {
    loader: 'url-loader',
    options: {
      limit: 10000,
      name: utils.assetsPath('img/[name].[hash:7].[ext]')
      }
    },
    {
      loader: 'image-webpack-loader',
      options: {
        bypassOnDebug: true,
      }
    }
  ]
}

```

### 4.5ã€å¼€å¯ gzip å‹ç¼©

gzip æ˜¯ GNUzip çš„ç¼©å†™ï¼Œæœ€æ—©ç”¨äº UNIX ç³»ç»Ÿçš„æ–‡ä»¶å‹ç¼©ã€‚HTTP åè®®ä¸Šçš„ gzip ç¼–ç æ˜¯ä¸€ç§ç”¨æ¥æ”¹è¿› web åº”ç”¨ç¨‹åºæ€§èƒ½çš„æŠ€æœ¯ï¼Œweb æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å¿…é¡»å…±åŒæ”¯æŒ gzipã€‚ç›®å‰ä¸»æµçš„æµè§ˆå™¨ï¼ŒChromeï¼Œfirefoxï¼ŒIE ç­‰éƒ½æ”¯æŒè¯¥åè®®ã€‚å¸¸è§çš„æœåŠ¡å™¨å¦‚ Apacheï¼ŒNginxï¼ŒIIS åŒæ ·æ”¯æŒï¼Œgzip å‹ç¼©æ•ˆç‡éå¸¸é«˜ï¼Œé€šå¸¸å¯ä»¥è¾¾åˆ° 70% çš„å‹ç¼©ç‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„ç½‘é¡µæœ‰ 30Kï¼Œå‹ç¼©ä¹‹åå°±å˜æˆäº† 9K å·¦å³

ä»¥ä¸‹æˆ‘ä»¬ä»¥æœåŠ¡ç«¯ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ express ä¸ºä¾‹ï¼Œå¼€å¯ gzip éå¸¸ç®€å•ï¼Œç›¸å…³æ­¥éª¤å¦‚ä¸‹ï¼š

- å®‰è£…

```bash
npm install compression --save
```

- æ·»åŠ ä»£ç é€»è¾‘ï¼š

```js
var compression = require("compression");
var app = express();
app.use(compression());
```

- é‡å¯æœåŠ¡ï¼Œè§‚å¯Ÿç½‘ç»œé¢æ¿é‡Œé¢çš„ response headerï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹çº¢åœˆé‡Œçš„å­—æ®µåˆ™è¡¨æ˜ gzip å¼€å¯æˆåŠŸ
  ![](https://user-gold-cdn.xitu.io/2019/8/15/16c924653ef48d24?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

### 4.6ã€ä½¿ç”¨ Tree Shaking å‰”é™¤ JS æ­»ä»£ç 

ree Shaking å¯ä»¥å‰”é™¤ç”¨ä¸ä¸Šçš„æ­»ä»£ç ï¼Œå®ƒä¾èµ– ES6 çš„ importã€export çš„æ¨¡å—åŒ–è¯­æ³•ï¼Œæœ€å…ˆåœ¨ Rollup ä¸­å‡ºç°ï¼ŒWebpack 2.0 å°†å…¶å¼•å…¥ã€‚é€‚åˆç”¨äº Lodashã€utils.js ç­‰å·¥å…·ç±»è¾ƒåˆ†æ•£çš„æ–‡ä»¶ã€‚`å®ƒæ­£å¸¸å·¥ä½œçš„å‰ææ˜¯ä»£ç å¿…é¡»é‡‡ç”¨ES6çš„æ¨¡å—åŒ–è¯­æ³•ï¼Œå› ä¸ºES6æ¨¡å—åŒ–è¯­æ³•æ˜¯é™æ€çš„ï¼ˆåœ¨å¯¼å…¥ã€å¯¼å‡ºè¯­å¥ä¸­çš„è·¯å¾„å¿…é¡»æ˜¯é™æ€å­—ç¬¦ä¸²ï¼Œä¸”ä¸èƒ½æ”¾å…¥å…¶ä»–ä»£ç å—ä¸­`ã€‚å¦‚æœé‡‡ç”¨äº† ES5 ä¸­çš„æ¨¡å—åŒ–ï¼Œä¾‹å¦‚ module.export = {...}ã€require( x+y )ã€if (x) { require( './util' ) }ï¼Œåˆ™ Webpack æ— æ³•åˆ†æå‡ºå¯ä»¥å‰”é™¤å“ªäº›ä»£ç ã€‚

**å¯ç”¨ Tree Shakingï¼š**

- ä¿®æ”¹.babelrc ä»¥ä¿ç•™ ES6 æ¨¡å—åŒ–è¯­å¥ï¼š

```json
{
  "presets": [
    [
      "env",
      { "module": false } //å…³é—­Babelçš„æ¨¡å—è½¬æ¢åŠŸèƒ½ï¼Œä¿ç•™ES6æ¨¡å—åŒ–è¯­æ³•
    ]
  ]
}
```

- å¯åŠ¨ webpack æ—¶å¸¦ä¸Š --display-used-exports å¯ä»¥åœ¨ shell æ‰“å°å‡ºå…³äºä»£ç å‰”é™¤çš„æç¤º

- ä½¿ç”¨ UglifyJSPluginï¼Œæˆ–è€…å¯åŠ¨æ—¶ä½¿ç”¨--optimize-minimize

- åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œéœ€è¦é…ç½® resolve.mainFields: ['jsnext:main', 'main'] ä»¥æŒ‡æ˜è§£æç¬¬ä¸‰æ–¹åº“ä»£ç æ—¶ï¼Œé‡‡ç”¨ ES6 æ¨¡å—åŒ–çš„ä»£ç å…¥å£

## äº”ã€ä¼˜åŒ–è¾“å‡ºè´¨é‡--åŠ é€Ÿç½‘ç»œè¯·æ±‚

### 5.1ã€æå–å…¬å…±ä»£ç 

å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰å»å°†æ¯ä¸ªé¡µé¢çš„ç¬¬ä¸‰æ–¹åº“å’Œå…¬å…±æ¨¡å—æå–å‡ºæ¥ï¼Œåˆ™é¡¹ç›®ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- ç›¸åŒçš„èµ„æºè¢«é‡å¤åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·çš„æµé‡å’ŒæœåŠ¡å™¨çš„æˆæœ¬ã€‚
- æ¯ä¸ªé¡µé¢éœ€è¦åŠ è½½çš„èµ„æºå¤ªå¤§ï¼Œå¯¼è‡´ç½‘é¡µé¦–å±åŠ è½½ç¼“æ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ¥ä¼˜åŒ–ä»¥ä¸Šé—®é¢˜ ã€‚Webpack4 å†…ç½®äº† optimization.splitChunks

**æå–å…¬å…±ä»£ç æ–¹æ³•**

- 1. å°†å…¬å…±ä»£ç æ”¾ç½® common ç›®å½•
- 2. å®‰è£…ä¸åŒå…¥å£æ–‡ä»¶æŠ½å–å…¬å…±ä»£ç 
- 3. æŠ½å–ä¸åŒ ui æ¡†æ¶
- 5. æŠ½å– webpack è¿è¡Œèµ„æº

webpac è¿è¡Œèµ„æºä¸»è¦æ˜¯æŒ‡ï¼š`åœ¨æµè§ˆå™¨è¿è¡Œæ—¶ï¼Œwebpack ç”¨æ¥è¿æ¥æ¨¡å—åŒ–çš„åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç ã€‚runtime åŒ…å«ï¼šåœ¨æ¨¡å—äº¤äº’æ—¶ï¼Œè¿æ¥æ¨¡å—æ‰€éœ€çš„åŠ è½½å’Œè§£æé€»è¾‘ã€‚åŒ…æ‹¬æµè§ˆå™¨ä¸­çš„å·²åŠ è½½æ¨¡å—çš„è¿æ¥ï¼Œä»¥åŠæ‡’åŠ è½½æ¨¡å—çš„æ‰§è¡Œé€»è¾‘ã€‚`

[è¯¦ç»†é…ç½®è¯·è§:å¤šé¡µé¢æ‰“åŒ…-å…¬å…±èµ„æºæŠ½å–å®ä¾‹](https://github.com/MrGaoGang/lucky_vue_template/blob/muti-pages/config/env_config.js)

```js

/**
 * å¤šå…¥å£æ–‡ä»¶ä»£ç åˆ†å‰²ç­–ç•¥
 */
exports.splitChunks={
  optimization: {
    splitChunks: {
      chunks: "all",
      minSize: 30000,
      minChunks: 1,
      maxAsyncRequests: 5,
      maxInitialRequests: 3,
      automaticNameDelimiter: "-",
      name: true,
      cacheGroups: {
        "vendors-admin": {
          test: /ant-design-vue|@ant-design/, // æŠ½ç¦»ant-design-vueå’Œant-design
          chunks: "async",//å› ä¸ºé‡‡ç”¨çš„æ˜¯åŠ¨æ€åŠ è½½uiåº“ï¼Œæ‰€ä»¥ä¸ä½¿ç”¨initialï¼Œä¸ä½¿ç”¨allæ˜¯å› ä¸ºå¯èƒ½ä¼šå¯¼å…¥å…¶ä»–æ²¡ä½¿ç”¨çš„antç»„ä»¶ä»£ç 
          name: "vendors-admin"
        },
        "vendors-index": {
          test: /iview/, // æŠ½ç¦»iview
          chunks: "async",
          name: "vendors-index"
        },
        common: {
          chunks: "initial",//æå–adminå’Œindexçš„å…¥å£çš„å…¬å…±åº“ï¼Œé€šå¸¸æ˜¯vue/vuex/vue-router
          name: "common",
          minChunks: 2,
          maxInitialRequests: 5,
          minSize: 0
        }
      }
    },
    runtimeChunk: {
      name: "manifest"
    }
  }
```

**é…ç½®è¯´æ˜**

- minSize(é»˜è®¤æ˜¯ 30000)ï¼šå½¢æˆä¸€ä¸ªæ–°ä»£ç å—æœ€å°çš„ä½“ç§¯
- minChunksï¼ˆé»˜è®¤æ˜¯ 1ï¼‰ï¼šåœ¨åˆ†å‰²ä¹‹å‰ï¼Œè¿™ä¸ªä»£ç å—æœ€å°åº”è¯¥è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼ˆè¯‘æ³¨ï¼šä¿è¯ä»£ç å—å¤ç”¨æ€§ï¼Œé»˜è®¤é…ç½®çš„ç­–ç•¥æ˜¯ä¸éœ€è¦å¤šæ¬¡å¼•ç”¨ä¹Ÿå¯ä»¥è¢«åˆ†å‰²ï¼‰
- maxInitialRequestsï¼ˆé»˜è®¤æ˜¯ 3ï¼‰ï¼šä¸€ä¸ªå…¥å£æœ€å¤§çš„å¹¶è¡Œè¯·æ±‚æ•°
- maxAsyncRequestsï¼ˆé»˜è®¤æ˜¯ 5ï¼‰ï¼šæŒ‰éœ€åŠ è½½æ—¶å€™æœ€å¤§çš„å¹¶è¡Œè¯·æ±‚æ•°ã€‚
- chunks (é»˜è®¤æ˜¯ async) ï¼šinitialã€async å’Œ all
- testï¼š ç”¨äºæ§åˆ¶å“ªäº›æ¨¡å—è¢«è¿™ä¸ªç¼“å­˜ç»„åŒ¹é…åˆ°ã€‚åŸå°ä¸åŠ¨ä¼ é€’å‡ºå»çš„è¯ï¼Œå®ƒé»˜è®¤ä¼šé€‰æ‹©æ‰€æœ‰çš„æ¨¡å—ã€‚å¯ä»¥ä¼ é€’çš„å€¼ç±»å‹ï¼šRegExpã€String å’Œ Function
- name(æ‰“åŒ…çš„ chunks çš„åå­—)ï¼šå­—ç¬¦ä¸²æˆ–è€…å‡½æ•°(å‡½æ•°å¯ä»¥æ ¹æ®æ¡ä»¶è‡ªå®šä¹‰åå­—)
- priority ï¼šç¼“å­˜ç»„æ‰“åŒ…çš„å…ˆåä¼˜å…ˆçº§ã€‚

æ‰“åŒ…ä¹‹ååˆ†æ:

![](https://github.com/MrGaoGang/lucky_vue_template/raw/muti-pages/images/bundle.png)

### 5.2ã€ä»£ç åˆ†å‰²åŠæŒ‰éœ€åŠ è½½ä»£ç 

é€šè¿‡ vue å†™çš„å•é¡µåº”ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„è·¯ç”±å¼•å…¥ã€‚å½“æ‰“åŒ…æ„å»ºçš„æ—¶å€™ï¼Œjavascript åŒ…ä¼šå˜å¾—éå¸¸å¤§ï¼Œå½±å“åŠ è½½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”çš„ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚è¿™æ ·ä¼šå¤§å¤§æé«˜é¦–å±æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œä½†æ˜¯å¯èƒ½å…¶ä»–çš„é¡µé¢çš„é€Ÿåº¦å°±ä¼šé™ä¸‹æ¥

```js
const Foo = () => import(/* webpackChunkName:"Foo" */ "./Foo.vue");
const router = new VueRouter({
  routes: [{ path: "/foo", component: Foo }]
});
```

**å¯¹äºå¸¸ç”¨çš„ iview/ant-design ç­‰ ui åº“éœ€è¦åšåˆ°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼š**
(å¸¸å¸¸é…åˆ@babel/plugin-syntax-dynamic-import ä½¿ç”¨)

```js
//babel.config.js
module.exports = {
  presets: [
    [
      "@babel/preset-env",
      {
        targets: {
          browsers: ["last 3 versions", "ie>=9"]
        },
        useBuiltIns: "entry",
        debug: false
      }
    ]
  ],
  plugins: [
    "@babel/plugin-transform-runtime",
    "@babel/plugin-syntax-dynamic-import",
    "@babel/plugin-proposal-object-rest-spread",
    "transform-vue-jsx",
    [
      "import",
      {
        libraryName: "iview",
        libraryDirectory: "src/components"
      }
    ]
  ]
};
```

### 5.3ã€æå– css ä¸ºä¸€ä¸ªæ–‡ä»¶

ä¸Šé¢è®²è¿°äº†å°† Js ä»£ç åšåˆ†ç¦»ï¼Œä½†æ˜¯è¿™é‡Œå»ºè®®å°† css æŠ½å–ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯ä¸ºäº†å‡å°‘æµè§ˆå™¨å¯¹æœåŠ¡çš„è¯·æ±‚ã€‚ä¼—æ‰€å‘¨çŸ¥æµè§ˆå™¨å¹¶å‘æ•°é‡é€šå¸¸ä¸º 4-6 ä¸ªã€‚
æŠ½å– css é€šå¸¸æœ‰ä¸¤ç§æ’ä»¶æ–¹å¼ã€‚

- extract-text-webpack-plugin
- [mini-css-extract-plugin](https://github.com/webpack-contrib/mini-css-extract-plugin)

extract-text-webpack-plugin å¯¹ webpack4.0+æ”¯æŒä¸å¤ªå‹å¥½ï¼Œå¦‚éœ€è¦é…ç½®ï¼Œè¯·è§[Vue å•/å¤šå…¥å£è„šæ‰‹æ¶](https://github.com/MrGaoGang/lucky_vue_template)

**æ­¤å¤„ç®€å•ä»‹ç» mini-css-extract-plugin çš„ä½¿ç”¨æ–¹å¼**

```bash
npm install -D mini-css-extract-plugin
```

```js
// webpack.config.js
var MiniCssExtractPlugin = require("mini-css-extract-plugin");

module.exports = {
  // å…¶å®ƒé€‰é¡¹...
  module: {
    rules: [
      // ... å¿½ç•¥å…¶å®ƒè§„åˆ™
      {
        test: /\.css$/,
        use: [
          //æµ‹è¯•ç¯å¢ƒä¸å‹ç¼©css,åªæœ‰ç”Ÿäº§ç¯å¢ƒå‹ç¼©
          process.env.NODE_ENV !== "production"
            ? "vue-style-loader"
            : MiniCssExtractPlugin.loader,
          "css-loader"
        ]
      }
    ]
  },
  plugins: [
    // ... å¿½ç•¥ vue-loader æ’ä»¶
    new MiniCssExtractPlugin({
      filename: "style.css"
    })
  ]
};
```

### 5.4ã€ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æºåŠ è½½

**1. CDN ç¼“å­˜ä»‹ç»**
ç”±äº CDN ä¼šä¸ºèµ„æºå¼€å¯é•¿æ—¶é—´çš„ç¼“å­˜ï¼Œä¾‹å¦‚ç”¨æˆ·ä» CDN ä¸Šè·å–äº† index.htmlï¼Œå³ä½¿ä¹‹åæ›¿æ¢äº† CDN ä¸Šçš„ index.htmlï¼Œç”¨æˆ·é‚£è¾¹ä»ä¼šåœ¨ä½¿ç”¨ä¹‹å‰çš„ç‰ˆæœ¬ç›´åˆ°ç¼“å­˜æ—¶é—´è¿‡æœŸã€‚ä¸šç•Œåšæ³•ï¼š

- HTML æ–‡ä»¶ï¼š`æ”¾åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šä¸”å…³é—­ç¼“å­˜ï¼Œä¸æ¥å…¥CDN`;
- é™æ€çš„ JSã€CSSã€å›¾ç‰‡ç­‰èµ„æºï¼š**å¼€å¯ CDN å’Œç¼“å­˜ï¼ŒåŒæ—¶æ–‡ä»¶åå¸¦ä¸Šç”±å†…å®¹è®¡ç®—å‡ºçš„ Hash å€¼ï¼Œè¿™æ ·åªè¦å†…å®¹å˜åŒ– hash å°±ä¼šå˜åŒ–ï¼Œæ–‡ä»¶åå°±ä¼šå˜åŒ–ï¼Œå°±ä¼šè¢«é‡æ–°ä¸‹è½½è€Œä¸è®ºç¼“å­˜æ—¶é—´å¤šé•¿ã€‚**

::: tip

å¦å¤–ï¼ŒHTTP1.x ç‰ˆæœ¬çš„åè®®ä¸‹ï¼Œæµè§ˆå™¨ä¼šå¯¹äºå‘åŒä¸€åŸŸåå¹¶è¡Œå‘èµ·çš„è¯·æ±‚æ•°é™åˆ¶åœ¨`4~8ä¸ª`ã€‚é‚£ä¹ˆæŠŠæ‰€æœ‰é™æ€èµ„æºæ”¾åœ¨åŒä¸€åŸŸåä¸‹çš„ CDN æœåŠ¡ä¸Šå°±ä¼šé‡åˆ°è¿™ç§é™åˆ¶ï¼Œæ‰€ä»¥å¯ä»¥æŠŠä»–ä»¬åˆ†æ•£æ”¾åœ¨ä¸åŒçš„ CDN æœåŠ¡ä¸Šï¼Œä¾‹å¦‚ JS æ–‡ä»¶æ”¾åœ¨ js.cdn.com ä¸‹ï¼Œå°† CSS æ–‡ä»¶æ”¾åœ¨ css.cdn.com ä¸‹ç­‰ã€‚è¿™æ ·åˆä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šå¢åŠ äº†åŸŸåè§£ææ—¶é—´ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡ dns-prefetch æ¥è§£å†³ `<link rel='dns-prefetch' href='//js.cdn.com'>`æ¥ç¼©å‡åŸŸåè§£æçš„æ—¶é—´ã€‚
:::

**2. æ„å»ºéœ€è¦æ»¡è¶³çš„æ¡ä»¶**

- é™æ€èµ„æºå¯¼å…¥çš„ URL è¦å˜æˆæŒ‡å‘ CDN æœåŠ¡çš„ç»å¯¹è·¯å¾„çš„ URL
- é™æ€èµ„æºçš„æ–‡ä»¶åéœ€è¦å¸¦ä¸Šæ ¹æ®å†…å®¹è®¡ç®—å‡ºçš„ Hash å€¼
- ä¸åŒç±»å‹èµ„æºæ”¾åœ¨ä¸åŒåŸŸåçš„ CDN ä¸Š

**3. é…ç½®å‚è€ƒ**

```js
const ExtractTextPlugin = require('extract-text-webpack-plugin');
const {WebPlugin} = require('web-webpack-plugin');
//...
output:{
 filename: '[name]_[chunkhash:8].js',
 path: path.resolve(__dirname, 'dist'),
 publicPatch: '//js.cdn.com/id/', //æŒ‡å®šå­˜æ”¾JSæ–‡ä»¶çš„CDNåœ°å€
},
module:{
 rules:[{
     test: /\.css/,
     use: ExtractTextPlugin.extract({
         use: ['css-loader?minimize'],
         publicPatch: '//img.cdn.com/id/', //æŒ‡å®šcssæ–‡ä»¶ä¸­å¯¼å…¥çš„å›¾ç‰‡ç­‰èµ„æºå­˜æ”¾çš„cdnåœ°å€
     }),
 },{
    test: /\.png/,
    use: ['file-loader?name=[name]_[hash:8].[ext]'], //ä¸ºè¾“å‡ºçš„PNGæ–‡ä»¶ååŠ ä¸ŠHashå€¼
 }]
},
plugins:[
  new WebPlugin({
     template: './template.html',
     filename: 'index.html',
     stylePublicPath: '//css.cdn.com/id/', //æŒ‡å®šå­˜æ”¾CSSæ–‡ä»¶çš„CDNåœ°å€
  }),
 new ExtractTextPlugin({
     filename:`[name]_[contenthash:8].css`, //ä¸ºè¾“å‡ºçš„CSSæ–‡ä»¶åŠ ä¸ŠHash
 })
]


```

**4. æ„å»ºæ³¨æ„äº‹é¡¹**

- è®¾ç½®äº† Js/css èµ„æºæ”¾åœ¨ cdn ä¸Šï¼Œä¼šå­˜åœ¨**èµ„æºç›¸å¯¹è·¯å¾„æ— æ³•è®¿é—®é—®é¢˜**ï¼Œ

æ¯”å¦‚è¯´ï¼šåœ¨ vue ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„`../css/infor.css`,åœ¨ç¼–è¯‘å®Œæˆä¹‹åï¼Œç”Ÿäº§ç¯å¢ƒè®¿é—®æ—¶æ—¶æ— æ³•ä½¿ç”¨`//css.cdn.com/id/css/infor.css`è®¿é—®åˆ°çš„ã€‚
æ­¤æ—¶è§£å†³åŠæ³•:

::: tip
ä½¿ç”¨`set-webpack-public-path plugin for webpack`,è§£å†³ç›¸å¯¹è·¯å¾„é—®é¢˜ã€‚è¯¦ç»†æ–‡æ¡£è¯·è§:[è¿™é‡Œ set-webpack-public-path plugin for webpack](https://github.com/microsoft/web-build-tools/blob/master/webpack/set-webpack-public-path-plugin/README.md)
:::

### 5.5ã€æ·»åŠ æµè§ˆå™¨ç¼“å­˜

[ä½ åº”è¯¥çŸ¥é“çš„ç¼“å­˜](https://juejin.im/post/5ae081aaf265da0b767d263a)

ç¼“å­˜ä¸»è¦åˆ†ä¸ºï¼š`å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜`

- å¼ºç¼“å­˜ï¼šä¸»è¦æ˜¯é€šè¿‡ http è¯·æ±‚å¤´ä¸­çš„`Cache-Control`å’Œ`Expire`ä¸¤ä¸ªå­—æ®µæ§åˆ¶ã€‚Expire æ˜¯ HTTP1.0 æ ‡å‡†ä¸‹çš„å­—æ®µï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥ã€‚æˆ‘ä»¬é‡ç‚¹æ¥è®¨è®ºçš„ Cache-Control è¿™ä¸ªå­—æ®µã€‚

ä¸€èˆ¬ï¼Œæˆ‘ä»¬ä¼šè®¾ç½® Cache-Control çš„å€¼ä¸º`â€œpublic, max-age=xxxâ€`ï¼Œè¡¨ç¤ºåœ¨ xxx ç§’å†…å†æ¬¡è®¿é—®è¯¥èµ„æºï¼Œå‡ä½¿ç”¨æœ¬åœ°çš„ç¼“å­˜ï¼Œä¸å†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚

- åå•†ç¼“å­˜ï¼šHTTP çš„æ¡ä»¶æ–¹æ³•å¯ä»¥é«˜æ•ˆçš„å®ç°å†éªŒè¯ã€‚HTTP å…è®¸ç¼“å­˜å‘åŸå§‹æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ¡ä»¶ GET,è¯·æ±‚æœåŠ¡å™¨åªæœ‰åœ¨æ–‡æ¡£ä¸ç¼“å­˜ä¸­ç°æœ‰çš„å‰¯æœ¬ä¸åŒæ—¶,æ‰å›é€å¯¹è±¡ä¸»ä½“,å¯¹äºç¼“å­˜åœ¨éªŒè¯æ¥è¯´æœ€æœ‰ç”¨çš„ 2 ä¸ªé¦–éƒ¨æ—¶

  - `If-Modified-Since: <date>`:

  å¦‚æœä»æŒ‡å®šæ—¥æœŸä¹‹å,æ–‡æ¡£è¢«ä¿®æ”¹äº†,å°±æ‰§è¡Œè¯·æ±‚çš„æ–¹æ³•ã€‚å¯ä»¥ä¸ Last-Modfied æœåŠ¡å™¨å“åº”é¦–éƒ¨é…åˆä½¿ç”¨,åªæœ‰åœ¨å†…å®¹ä¿®æ”¹åä¸å·²ç¼“å­˜ç‰ˆæœ¬æœ‰æ‰€ä¸åŒçš„æ—¶å€™æ‰å»è·å–å†…å®¹

  - `If-None-Match:<tags>`:

  æœåŠ¡å™¨å¯ä»¥ä¸ºæ–‡æ¡£æä¾›ç‰¹æ®Šçš„æ ‡ç­¾(ETag),è€Œä¸æ˜¯å°†å…¶ä¸æœ€è¿‘ä¿®æ”¹æ—¥æœŸå‘åŒ¹é…,è¿™äº›æ ‡ç­¾å°±åƒåºåˆ—å·ä¸€æ ·ã€‚å¦‚æœå·²ç¼“å­˜æ ‡ç­¾ä¸æœåŠ¡å™¨æ–‡æ¡£ä¸­çš„æ ‡ç­¾æœ‰æ‰€ä¸åŒ,If-None-Match é¦–éƒ¨å°±ä¼šæ‰§è¡Œæ‰€è¯·æ±‚çš„æ–¹æ³•

> åœ¨æ›´æ–°ç‰ˆæœ¬ä¹‹åï¼Œå¦‚ä½•è®©ç”¨æˆ·ç¬¬ä¸€æ—¶é—´ä½¿ç”¨æœ€æ–°çš„èµ„æºæ–‡ä»¶å‘¢ï¼Ÿåœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™ï¼Œé¡ºä¾¿æŠŠé™æ€èµ„æºçš„è·¯å¾„æ”¹äº†ï¼Œè¿™æ ·ï¼Œå°±ç›¸å½“äºç¬¬ä¸€æ¬¡è®¿é—®è¿™äº›èµ„æºï¼Œå°±ä¸ä¼šå­˜åœ¨ç¼“å­˜çš„é—®é¢˜äº†ã€‚

**webpack ä½¿ç”¨ Hash æ–¹å¼,**

```js
entry:{
    main: path.join(__dirname,'./main.js'),
    vendor: ['react', 'antd']
},
output:{
    path:path.join(__dirname,'./dist'),
    publicPath: '/dist/',
    filname: 'bundle.[chunkhash].js'
}

```

webpack ç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯`hashã€chunkhashå’Œcontenthash`ã€‚é‚£ä¹ˆè¿™ä¸‰è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

- hashï¼š**è·Ÿæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œæ„å»ºç”Ÿæˆçš„æ–‡ä»¶ hash å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªè¦é¡¹ç›®é‡Œæœ‰æ–‡ä»¶æ›´æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼éƒ½ä¼šæ›´æ”¹ã€‚**
- chunkhashï¼š**æ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(Entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„ chunkï¼Œç”Ÿæˆå¯¹åº”çš„ hash å€¼ã€‚**
- contenthashï¼š**ç”±æ–‡ä»¶å†…å®¹äº§ç”Ÿçš„ hash å€¼ï¼Œå†…å®¹ä¸åŒäº§ç”Ÿçš„ contenthash å€¼ä¹Ÿä¸ä¸€æ ·ã€‚**

::: tip
åœ¨å®é™…åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠé¡¹ç›®ä¸­çš„ css éƒ½æŠ½ç¦»å‡ºå¯¹åº”çš„ css æ–‡ä»¶æ¥åŠ ä»¥å¼•ç”¨ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ chunkhashï¼Œå½“æˆ‘ä»¬æ”¹äº† css ä»£ç ä¹‹åï¼Œä¼šå‘ç° css æ–‡ä»¶ hash å€¼æ”¹å˜çš„åŒæ—¶ï¼Œjs æ–‡ä»¶çš„ hash å€¼ä¹Ÿä¼šæ”¹å˜ã€‚è¿™æ—¶å€™ï¼Œcontenthash å°±æ´¾ä¸Šç”¨åœºäº†ã€‚

ç»“åˆä¸Šé¢çš„å„ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œæµè§ˆå™¨ç¼“å­˜æ–¹æ¡ˆä¸ºï¼š

1. **æå–å…¬å…±ä»£ç (vue/react/jquery ç­‰)æˆ–è€…ä½¿ç”¨ external/dllplugin æ–¹å¼ï¼Œè¿›è¡ŒæŠ½å–ï¼Œå‡å°‘åŸºç¡€æ¨¡å—ç¼–è¯‘æ¬¡æ•°ï¼Œä»è€Œå‡å°‘æµè§ˆå™¨è®¿é—®æ¬¡æ•°(é™æ€èµ„æºä¸å˜ï¼Œæµè§ˆå™¨ä½¿ç”¨ç¼“å­˜è¯»å–åŸºç¡€æ¨¡å—)ï¼›**
2. **css æ–‡ä»¶å’Œ Js æ–‡ä»¶é‡‡ç”¨ contenthash/chunkhashï¼Œå‡å°‘æ–‡ä»¶ hash å€¼å˜åŠ¨**
3. **è®¾ç½® Cache-Controlï¼Œæ§åˆ¶ç¼“å­˜æ—¶é—´**

:::

## å…­ã€ä¼˜åŒ–ç»“æœåˆ†æ

### 6.1ã€ä¼˜åŒ– SourceMap

æˆ‘ä»¬åœ¨é¡¹ç›®è¿›è¡Œæ‰“åŒ…åï¼Œä¼šå°†å¼€å‘ä¸­çš„å¤šä¸ªæ–‡ä»¶ä»£ç æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ç»è¿‡å‹ç¼©ï¼Œå»æ‰å¤šä½™çš„ç©ºæ ¼ï¼Œä¸” babel ç¼–è¯‘åŒ–åï¼Œæœ€ç»ˆä¼šç”¨äºçº¿ä¸Šç¯å¢ƒï¼Œé‚£ä¹ˆè¿™æ ·å¤„ç†åçš„ä»£ç å’Œæºä»£ç ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ï¼Œå½“æœ‰ bug çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½å®šä½åˆ°å‹ç¼©å¤„ç†åçš„ä»£ç ä½ç½®ï¼Œæ— æ³•å®šä½åˆ°å¼€å‘ç¯å¢ƒä¸­çš„ä»£ç ï¼Œå¯¹äºå¼€å‘ä¸å¥½è°ƒå¼ï¼Œå› æ­¤ sourceMap å‡ºç°äº†ï¼Œ`å®ƒå°±æ˜¯ä¸ºäº†è§£å†³ä¸å¥½è°ƒå¼ä»£ç é—®é¢˜çš„`ã€‚

[å®˜æ–¹æ–‡æ¡£](https://www.webpackjs.com/configuration/devtool/)

**SourceMap çš„å¯é€‰å€¼å¦‚ä¸‹ï¼š**

| devtool                        | æ„å»ºé€Ÿåº¦ | é‡æ–°æ„å»ºé€Ÿåº¦ | ç”Ÿäº§ç¯å¢ƒ | å“è´¨(quality)          |
| ------------------------------ | -------- | ------------ | -------- | ---------------------- |
| (none)                         | +++      | +++          | yes      | æ‰“åŒ…åçš„ä»£ç            |
| eval                           | +++      | +++          | no       | ç”Ÿæˆåçš„ä»£ç            |
| cheap-eval-source-map          | +        | ++           | no       | è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰ |
| cheap-module-eval-source-map   | o        | ++           | no       | åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰   |
| eval-source-map                | --       | +            | no       | åŸå§‹æºä»£ç              |
| cheap-source-map               | +        | o            | yes      | è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰ |
| cheap-module-source-map        | o        | -            | yes      | åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰   |
| inline-cheap-source-map        | +        | o            | no       | è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰ |
| inline-cheap-module-source-map | o        | -            | no       | åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰   |
| source-map                     | --       | --           | yes      | åŸå§‹æºä»£ç              |
| inline-source-map              | --       | --           | no       | åŸå§‹æºä»£ç              |
| hidden-source-map              | --       | --           | yes      | åŸå§‹æºä»£ç              |
| nosources-source-map           | --       | --           | yes      | æ— æºä»£ç å†…å®¹           |

::: tip
`+++` éå¸¸å¿«é€Ÿ, `++` å¿«é€Ÿ, `+` æ¯”è¾ƒå¿«, `o` ä¸­ç­‰, `-` æ¯”è¾ƒæ…¢, `--` æ…¢
:::

**å¯¹äºå¼€å‘ç¯å¢ƒ**

ä»¥ä¸‹é€‰é¡¹éå¸¸é€‚åˆå¼€å‘ç¯å¢ƒï¼š

`eval` - æ¯ä¸ªæ¨¡å—éƒ½ä½¿ç”¨ `eval()` æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½æœ‰ `//@ sourceURL`ã€‚æ­¤é€‰é¡¹ä¼šéå¸¸å¿«åœ°æ„å»ºã€‚ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œç”±äºä¼šæ˜ å°„åˆ°è½¬æ¢åçš„ä»£ç ï¼Œè€Œä¸æ˜¯æ˜ å°„åˆ°åŸå§‹ä»£ç ï¼ˆæ²¡æœ‰ä» loader ä¸­è·å– source mapï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®çš„æ˜¾ç¤ºè¡Œæ•°ã€‚

`eval-source-map` - æ¯ä¸ªæ¨¡å—ä½¿ç”¨ `eval()` æ‰§è¡Œï¼Œå¹¶ä¸” source map è½¬æ¢ä¸º DataUrl åæ·»åŠ åˆ° `eval()` ä¸­ã€‚åˆå§‹åŒ– source map æ—¶æ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯ä¼šåœ¨é‡æ–°æ„å»ºæ—¶æä¾›æ¯”è¾ƒå¿«çš„é€Ÿåº¦ï¼Œå¹¶ä¸”ç”Ÿæˆå®é™…çš„æ–‡ä»¶ã€‚è¡Œæ•°èƒ½å¤Ÿæ­£ç¡®æ˜ å°„ï¼Œå› ä¸ºä¼šæ˜ å°„åˆ°åŸå§‹ä»£ç ä¸­ã€‚å®ƒä¼šç”Ÿæˆç”¨äºå¼€å‘ç¯å¢ƒçš„æœ€ä½³å“è´¨çš„ source mapã€‚

`cheap-eval-source-map` - ç±»ä¼¼ `eval-source-map`ï¼Œæ¯ä¸ªæ¨¡å—ä½¿ç”¨ `eval()` æ‰§è¡Œã€‚è¿™æ˜¯ "cheap(ä½å¼€é”€)" çš„ source mapï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç”Ÿæˆåˆ—æ˜ å°„(column mapping)ï¼Œåªæ˜¯æ˜ å°„è¡Œæ•°ã€‚å®ƒä¼šå¿½ç•¥æºè‡ª loader çš„ source mapï¼Œå¹¶ä¸”ä»…æ˜¾ç¤ºè½¬è¯‘åçš„ä»£ç ï¼Œå°±åƒ `eval` devtoolã€‚

`cheap-module-eval-source-map` - ç±»ä¼¼ `cheap-eval-source-map`ï¼Œå¹¶ä¸”ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæºè‡ª loader çš„ source map ä¼šå¾—åˆ°æ›´å¥½çš„å¤„ç†ç»“æœã€‚ç„¶è€Œï¼Œloader source map ä¼šè¢«ç®€åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªæ˜ å°„(mapping)ã€‚

**å¯¹äºç”Ÿäº§ç¯å¢ƒ**

è¿™äº›é€‰é¡¹é€šå¸¸ç”¨äºç”Ÿäº§ç¯å¢ƒä¸­ï¼š

`(none)`ï¼ˆçœç•¥ `devtool` é€‰é¡¹ï¼‰ - ä¸ç”Ÿæˆ source mapã€‚è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

`source-map` - æ•´ä¸ª source map ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ç”Ÿæˆã€‚å®ƒä¸º bundle æ·»åŠ äº†ä¸€ä¸ªå¼•ç”¨æ³¨é‡Šï¼Œä»¥ä¾¿å¼€å‘å·¥å…·çŸ¥é“åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒã€‚

::: warning
ä½ åº”è¯¥å°†ä½ çš„æœåŠ¡å™¨é…ç½®ä¸ºï¼Œä¸å…è®¸æ™®é€šç”¨æˆ·è®¿é—® source map æ–‡ä»¶ï¼
:::

`hidden-source-map` - ä¸ `source-map` ç›¸åŒï¼Œä½†ä¸ä¼šä¸º bundle æ·»åŠ å¼•ç”¨æ³¨é‡Šã€‚å¦‚æœä½ åªæƒ³ source map æ˜ å°„é‚£äº›æºè‡ªé”™è¯¯æŠ¥å‘Šçš„é”™è¯¯å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œä½†ä¸æƒ³ä¸ºæµè§ˆå™¨å¼€å‘å·¥å…·æš´éœ²ä½ çš„ source mapï¼Œè¿™ä¸ªé€‰é¡¹ä¼šå¾ˆæœ‰ç”¨ã€‚

::: warning
ä½ ä¸åº”å°† source map æ–‡ä»¶éƒ¨ç½²åˆ° web æœåŠ¡å™¨ã€‚è€Œæ˜¯åªå°†å…¶ç”¨äºé”™è¯¯æŠ¥å‘Šå·¥å…·ã€‚
:::

`nosources-source-map` - åˆ›å»ºçš„ source map ä¸åŒ…å« `sourcesContent(æºä»£ç å†…å®¹)`ã€‚å®ƒå¯ä»¥ç”¨æ¥æ˜ å°„å®¢æˆ·ç«¯ä¸Šçš„å †æ ˆè·Ÿè¸ªï¼Œè€Œæ— é¡»æš´éœ²æ‰€æœ‰çš„æºä»£ç ã€‚ä½ å¯ä»¥å°† source map æ–‡ä»¶éƒ¨ç½²åˆ° web æœåŠ¡å™¨ã€‚

::: warning
è¿™ä»ç„¶ä¼šæš´éœ²åç¼–è¯‘åçš„æ–‡ä»¶åå’Œç»“æ„ï¼Œä½†å®ƒä¸ä¼šæš´éœ²åŸå§‹ä»£ç ã€‚
:::

::: tip
åœ¨ä½¿ç”¨ `terser-webpack-plugin` æ—¶ï¼Œä½ å¿…é¡»æä¾› `sourceMapï¼štrue` é€‰é¡¹æ¥å¯ç”¨ source map æ”¯æŒã€‚
:::

### 6.2ã€ä½¿ç”¨ webpack-bundle-analyzer

**é…ç½®æ–‡ä»¶é…ç½®**

```js
if (config.build.bundleAnalyzerReport) {
  var BundleAnalyzerPlugin =   require('webpack-bundle-analyzer').BundleAnalyzerPlugin;
  webpackConfig.plugins.push(new BundleAnalyzerPlugin());
}
æ‰§è¡Œ $ npm run build --report åç”Ÿæˆåˆ†ææŠ¥å‘Šå¦‚ä¸‹ï¼š

```

![](https://github.com/MrGaoGang/lucky_vue_template/raw/muti-pages/images/bundle.png)

### 6.3 ä½¿ç”¨ Chrome Performance æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆ

ä½¿ç”¨ Chrome å¼€å‘è€…å·¥å…·åˆ†æé¡µé¢æ€§èƒ½çš„æ­¥éª¤å¦‚ä¸‹ã€‚

- æ‰“å¼€ Chrome å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° Performance é¢æ¿
- ç‚¹å‡» Record å¼€å§‹å½•åˆ¶
- åˆ·æ–°é¡µé¢æˆ–å±•å¼€æŸä¸ªèŠ‚ç‚¹
- ç‚¹å‡» Stop åœæ­¢å½•åˆ¶
  [è¯¦æƒ…å¯è§ï¼šå…¨æ–° Chrome Devtool Performance ä½¿ç”¨æŒ‡å—](https://zhuanlan.zhihu.com/p/29879682)

## å‚è€ƒ

- [Vue é¡¹ç›®æ€§èƒ½ä¼˜åŒ– â€” å®è·µæŒ‡å—ï¼ˆç½‘ä¸Šæœ€å…¨ / è¯¦ç»†ï¼‰](https://juejin.im/post/5d548b83f265da03ab42471d)
- [Vue é¡¹ç›® Webpack ä¼˜åŒ–å®è·µï¼Œæ„å»ºæ•ˆç‡æé«˜ 50%](https://juejin.im/post/5c1fa158f265da613c09cb36)
- [å‰ç«¯ç¼“å­˜æœ€ä½³å®è·µ](https://juejin.im/post/5c136bd16fb9a049d37efc47)
- [ä¸‰ååˆ†é’ŸæŒæ¡ Webpack æ€§èƒ½ä¼˜åŒ–](https://juejin.im/post/5b652b036fb9a04fa01d616b)
- [å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•](http://lab.johnsenzhou.com/Front-End-Performance-Checklist/)
